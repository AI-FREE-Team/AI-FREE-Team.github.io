<html lang="en"><head>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <link rel="stylesheet" type="text/css" href="//d1ypub5wfz82gq.cloudfront.net/AdsService/CSS/ba_ad.min.css?v=180717001"><script type="text/javascript" async="" src="https://ssl.google-analytics.com/ga.js"></script><script type="text/javascript" src="//agent.aralego.com/sdk" async=""></script><script type="text/javascript" src="//js1.bloggerads.net/getads.aspx?blogid=20180821000002&amp;fid=1&amp;c=b354541090&amp;d=1&amp;sh5=1&amp;sflash=0&amp;isc=0&amp;w=477&amp;isw=0&amp;hw=478&amp;cw=0" async=""></script><script type="text/javascript" src="//d1ypub5wfz82gq.cloudfront.net/AdsService/JS/ba.min.js?v=180717001" async=""></script><script type="text/javascript" async="" src="https://www.google-analytics.com/analytics.js"></script><script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-124339513-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'UA-124339513-1');
    </script>
    
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>【進階分析】鐵達尼生存預測 - 手把手資料分析實戰教學</title>
    
    
    

    <!-- Bootstrap core CSS -->
    <link href="/static/bootstrap_blog/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    
    <link rel="Shortcut Icon" type="image/x-icon" href="/static/images/AI_free_logo.png">

    <!-- Custom fonts for this template -->
    <link href="/static/bootstrap_blog/vendor/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href="/static/bootstrap_blog/vendor/font-awesome/css/font1.css" rel="stylesheet" type="text/css">
    <link href="/static/bootstrap_blog/vendor/font-awesome/css/font2.css" rel="stylesheet" type="text/css">

    <!-- Custom styles for this template -->
    <link href="/static/bootstrap_blog/css/clean-blog.min.css" rel="stylesheet">

  <link type="text/css" rel="stylesheet" href="https://cdn.aralego.net/css/dev/ucfad-formats.css"></head>

  <body>

        <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-light fixed-top" id="mainNav">
      <div class="container">
        <a class="navbar-brand" href="/blog">AI . FREE TEAM</a>
        <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
          Menu
          <i class="fa fa-bars"></i>
        </button>
        <div class="collapse navbar-collapse" id="navbarResponsive">
          <ul class="navbar-nav ml-auto">
            <li class="nav-item">
              <a class="nav-link" href="/blog">首頁</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="/postlist">文章列表</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="/contacts">聯絡我們</a>
            </li>
            
            <li class="nav-item">
              <a class="nav-link" href="/profile">會員中心</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="/accounts/logout">登出</a>
            </li><input type="hidden" name="csrfmiddlewaretoken" value="5j4gbE69e33F8scH262vRsWoUYanK2WqO55jF4hucKbJujJwH32Ev2OttfqRGLfj">  
                        
          </ul>
        </div>
      </div>
    </nav>
    
    



    <!-- <div>
      <strong>Menu:</strong>
      <ul>
    
    <li><a href="/accounts/email/">Change E-mail</a></li>
    <li><a href="/accounts/logout/">Sign Out</a></li>
     
      </ul>
    </div>-->

    
    <!-- Page Header -->
    <header class="masthead" style="background-image: url('/static/images/signup.jpg')">
      <div class="overlay"></div>
      <div class="container">
        <div class="row">
          <div class="col-lg-8 col-md-10 mx-auto">
            <div class="post-heading">
              <h1 align="center">【進階分析】鐵達尼生存預測 - 手把手資料分析實戰教學</h1>
              <h2 class="subheading" align="center"></h2>
            </div>
          </div>
        </div>
      </div>
    </header>


    <!-- Main Content -->
    <div class="container">
      <div class="row">
        <div class="col-lg-8 col-md-10 mx-auto">
          <div class="post-preview">         
              
                <p style="text-align: center;"><img width="70%" src="https://pbs.twimg.com/media/C9URtCZVoAAWBny.jpg"></p><p style="white-space: normal; text-align: center;"><span style="color: rgb(33, 37, 41); font-family: 微軟正黑體; text-align: justify; background-color: rgb(255, 255, 255); font-size: 14px;">(<a href="https://pbs.twimg.com/media/C9URtCZVoAAWBny.jpg" target="_blank">圖片來源</a>)</span></p><p style="white-space: normal;"><span style="color: rgb(33, 37, 41); font-family: 微軟正黑體; font-size: 18px; text-align: justify; background-color: rgb(255, 255, 255);"></span></p><p style="color: rgb(33, 33, 33); margin-bottom: 6px; margin-top: 0.5em; font-family: Roboto, Noto, sans-serif; white-space: normal; background-color: rgb(255, 255, 255);"><img src="https://raw.githubusercontent.com/chenkenanalytic/img/master/af/aifreeteam.png" alt="人工智慧 - 自由團隊" style="max-width: 100%; max-height: 100%;"></p><p style="color: rgb(33, 33, 33); margin-bottom: 6px; margin-top: 0.5em; font-family: Roboto, Noto, sans-serif; white-space: normal; background-color: rgb(255, 255, 255); text-align: center;"><span style="color: rgb(33, 37, 41); font-family: 微軟正黑體; font-size: 18px; text-align: justify; background-color: rgb(255, 255, 255);"><span style="color: rgb(33, 33, 33); font-family: Roboto, Noto, sans-serif; font-size: 14px; text-align: -webkit-center; background-color: rgb(255, 255, 255);">(Author: Dr. Wu - 彥霖 博士；Editor: Ken；Date of published: 2019/12/3)</span></span></p><p style="color: rgb(33, 33, 33); margin-bottom: 6px; margin-top: 0.5em; font-family: Roboto, Noto, sans-serif; white-space: normal; background-color: rgb(255, 255, 255);"><span style="color: rgb(33, 37, 41); font-family: 微軟正黑體; font-size: 18px; text-align: justify; background-color: rgb(255, 255, 255);">這篇文章主要是與資料科學初心者們，分享機器學習的基本分析流程，透過 Kaggle 上鐵達尼號生存預測比賽，手把手從<strong>探索性數據分析(Exploratory Data Analysis)</strong>認識資料，到<strong>特徵工程(Feature Engineering)</strong>處理欄位的缺漏值、離群值等，最後，我們建立一個<strong>隨機森林(Random Forest)</strong>模型來預測資料。</span></p><p style="color: rgb(33, 33, 33); margin-bottom: 6px; margin-top: 0.5em; font-family: Roboto, Noto, sans-serif; white-space: normal; background-color: rgb(255, 255, 255);"><span style="color: rgb(33, 37, 41); font-family: 微軟正黑體; font-size: 18px; text-align: justify; background-color: rgb(255, 255, 255);"><br></span></p><p style="color: rgb(33, 33, 33); margin-bottom: 6px; margin-top: 0.5em; font-family: Roboto, Noto, sans-serif; white-space: normal; background-color: rgb(255, 255, 255);"><span style="color: rgb(33, 37, 41); font-family: 微軟正黑體; font-size: 18px; text-align: justify; background-color: rgb(255, 255, 255);">本文章的用意，除期許能讓機器學習的初心者們有基礎概念外，同時提供幾個分析時常使用的 Python 程式碼，讓初心者們能夠更快速上手實作，若已有一定基礎的讀者們，則可再結合 Kaggle 討論區中的文章，更深入來優化整個分析過程。</span></p><p style="color: rgb(33, 33, 33); margin-bottom: 6px; margin-top: 0.5em; font-family: Roboto, Noto, sans-serif; white-space: normal; background-color: rgb(255, 255, 255);"><span style="color: rgb(33, 37, 41); font-family: 微軟正黑體; font-size: 18px; text-align: justify; background-color: rgb(255, 255, 255);"><br></span></p><p style="color: rgb(33, 33, 33); margin-bottom: 6px; margin-top: 0.5em; font-family: Roboto, Noto, sans-serif; white-space: normal; background-color: rgb(255, 255, 255);"><span style="color: rgb(33, 37, 41); font-family: 微軟正黑體; font-size: 18px; text-align: justify; background-color: rgb(255, 255, 255);">分析主題：&nbsp;</span><a href="https://www.kaggle.com/c/titanic" target="_blank"><span style="font-family: 微軟正黑體; font-size: 18px; text-align: justify; background-color: rgb(255, 255, 255); color: rgb(0, 112, 192);">Titanic: Machine Learning from Disaster</span></a><span style="color: rgb(33, 37, 41); font-family: 微軟正黑體; font-size: 18px; text-align: justify; background-color: rgb(255, 255, 255);">&nbsp;(第一次使用需註冊帳號、下載 Data)</span></p><p style="color: rgb(33, 33, 33); margin-bottom: 6px; margin-top: 0.5em; font-family: Roboto, Noto, sans-serif; white-space: normal; background-color: rgb(255, 255, 255);"><span style="color: rgb(33, 37, 41); font-family: 微軟正黑體; font-size: 18px; text-align: justify; background-color: rgb(255, 255, 255);">(<a href="https://github.com/AI-FREE-Team/Data-Analytics-in-Practice-Titanic" target="_blank" style="color: rgb(0, 112, 192); text-decoration: underline;"><span style="font-family: 微軟正黑體; font-size: 18px; text-align: justify; background-color: rgb(255, 255, 255); color: rgb(0, 112, 192);">實作教學 Github</span></a>；文末附上貼心 Colab 實作教學)</span></p><p style="white-space: normal;"><span style="color: rgb(33, 37, 41); font-family: 微軟正黑體; font-size: 18px; text-align: justify; background-color: rgb(255, 255, 255);"><br></span></p><p style="white-space: normal;"><span style="color: rgb(33, 37, 41); font-family: 微軟正黑體; font-size: 18px; text-align: justify; background-color: rgb(255, 255, 255);"></span><span style="font-size: 24px;"><strong><span style="color: rgb(33, 37, 41); font-family: 微軟正黑體; text-align: justify; background-color: rgb(255, 255, 255);">起手式</span></strong></span><span style="color: rgb(33, 37, 41); font-family: 微軟正黑體; font-size: 18px; text-align: justify; background-color: rgb(255, 255, 255);">，我們先載入分析過程中所需要用到的套件：</span></p><pre class="brush:python;toolbar:false" style="font-family: Menlo, Bitstream Vera Sans Mono, DejaVu Sans Mono, Monaco,Consolas,monospace; font-size: 12px; color: #000000; line-height: 1.5; background: #f1f1f1;; padding: 15px 20px; border-radius: 3px;">#pip&nbsp;install&nbsp;sklearn
import&nbsp;pandas&nbsp;as&nbsp;pd
import&nbsp;numpy&nbsp;as&nbsp;np

#&nbsp;繪圖相關套件
import&nbsp;matplotlib.pyplot&nbsp;as&nbsp;plt
%matplotlib&nbsp;inline
import&nbsp;matplotlib.gridspec&nbsp;as&nbsp;gridspec
import&nbsp;seaborn&nbsp;as&nbsp;sns
plt.style.use(&nbsp;'ggplot'&nbsp;)&nbsp;

#&nbsp;標籤編碼(Label)、獨熱編碼(OneHot)
from&nbsp;sklearn.preprocessing&nbsp;import&nbsp;LabelEncoder,&nbsp;OneHotEncoder&nbsp;
#&nbsp;決策樹(Decision&nbsp;Tree)
from&nbsp;sklearn.tree&nbsp;import&nbsp;DecisionTreeClassifier
#&nbsp;隨機森林(Random&nbsp;Forest)
from&nbsp;sklearn.ensemble&nbsp;import&nbsp;RandomForestClassifier

from&nbsp;IPython.display&nbsp;import&nbsp;display
import&nbsp;warnings
warnings.filterwarnings(&nbsp;'ignore'&nbsp;)</pre><p style="white-space: normal;"><span style="color: rgb(33, 37, 41); font-family: 微軟正黑體; font-size: 18px; text-align: justify; background-color: rgb(255, 255, 255);"></span></p><h2 class="text-cell-section-header" style="color: rgb(33, 33, 33); font-family: Roboto, Noto, sans-serif; font-weight: 400; margin-bottom: 0.5em; position: relative; margin-top: 0.5em; font-size: 23px; white-space: normal; background-color: rgb(255, 255, 255);"><span style="font-size: 20px;"><strong><span style="color: rgb(33, 37, 41); font-family: 微軟正黑體; text-align: justify; background-color: rgb(255, 255, 255);"><br></span></strong></span></h2><h2 class="text-cell-section-header" style="color: rgb(33, 33, 33); font-family: Roboto, Noto, sans-serif; font-weight: 400; margin-bottom: 0.5em; position: relative; margin-top: 0.5em; font-size: 23px; white-space: normal; background-color: rgb(255, 255, 255);"><span style="font-size: 24px;"><strong><span style="color: rgb(33, 37, 41); font-family: 微軟正黑體; text-align: justify; background-color: rgb(255, 255, 255);">上傳資料 (Optional - Colab 使用者)</span></strong></span></h2><p style="color: rgb(33, 33, 33); margin-bottom: 6px; margin-top: 0.5em; font-family: Roboto, Noto, sans-serif; white-space: normal; background-color: rgb(255, 255, 255);"><span style="color: rgb(33, 37, 41); font-family: 微軟正黑體; font-size: 18px; text-align: justify; background-color: rgb(255, 255, 255);">透過 Kaggle 資料競賽網站，下載鐵達尼號資料集。(</span><a href="https://www.kaggle.com/c/titanic" target="_blank"><span style="font-family: 微軟正黑體; font-size: 18px; text-align: justify; background-color: rgb(255, 255, 255); color: rgb(0, 112, 192);">Kaggle</span></a><span style="color: rgb(33, 37, 41); font-family: 微軟正黑體; font-size: 18px; text-align: justify;">)</span></p><p style="color: rgb(33, 33, 33); margin-bottom: 6px; margin-top: 0.5em; font-family: Roboto, Noto, sans-serif; white-space: normal; background-color: rgb(255, 255, 255);"><span style="color: rgb(33, 37, 41); font-family: 微軟正黑體; font-size: 18px; text-align: justify;">(點擊 "Download All" 後解壓縮，上傳 gender_submission.csv, test.csv , train.csv)</span></p><p style="color: rgb(33, 33, 33); margin-bottom: 6px; margin-top: 0.5em; font-family: Roboto, Noto, sans-serif; white-space: normal; background-color: rgb(255, 255, 255);"><span style="color: rgb(33, 37, 41); font-family: 微軟正黑體; font-size: 18px; text-align: justify; background-color: rgb(255, 255, 255);">※ 可一次上傳或分批上傳，上傳成功後，點擊左方 "Files" 欄位，即可看到上傳的檔案。 ※</span></p><p style="color: rgb(33, 33, 33); margin-bottom: 6px; margin-top: 0.5em; font-family: Roboto, Noto, sans-serif; white-space: normal; background-color: rgb(255, 255, 255);"><span style="color: rgb(33, 37, 41); font-family: 微軟正黑體; font-size: 18px; text-align: justify; background-color: rgb(255, 255, 255);"><br></span></p><pre class="brush:python;toolbar:false" style="padding: 15px 20px; border-radius: 3px; background-color: rgb(241, 241, 241); font-family: Menlo, &quot;Bitstream Vera Sans Mono&quot;, &quot;DejaVu Sans Mono&quot;, Monaco, Consolas, monospace; font-size: 12px; line-height: 1.5;">from&nbsp;google.colab&nbsp;import&nbsp;files

uploaded&nbsp;=&nbsp;files.upload()</pre><p style="white-space: normal;"><br></p><h2 class="text-cell-section-header" style="color: rgb(33, 33, 33); font-family: Roboto, Noto, sans-serif; font-weight: 400; margin-bottom: 0.5em; position: relative; margin-top: 0.5em; font-size: 23px; white-space: normal; background-color: rgb(255, 255, 255);"><span style="font-size: 24px;"><strong><span style="color: rgb(33, 37, 41); font-family: 微軟正黑體; text-align: justify; background-color: rgb(255, 255, 255);">匯入資料</span></strong></span></h2><p style="color: rgb(33, 33, 33); margin-bottom: 6px; margin-top: 0.5em; font-family: Roboto, Noto, sans-serif; white-space: normal; background-color: rgb(255, 255, 255);"><span style="color: rgb(33, 37, 41); font-family: 微軟正黑體; font-size: 18px; text-align: justify; background-color: rgb(255, 255, 255);">透過 pandas 匯入訓練集與測試集資料，並利用 shape 得知資料的維度：</span></p><ul style="color: rgb(33, 33, 33); margin-bottom: 6px; margin-top: 0.5em; font-family: Roboto, Noto, sans-serif; white-space: normal; background-color: rgb(255, 255, 255);" class=" list-paddingleft-2"><li><p><span style="color: rgb(33, 37, 41); font-family: 微軟正黑體; font-size: 18px; text-align: justify; background-color: rgb(255, 255, 255);">訓練集有 891 筆資料、12 個特徵欄位；</span></p></li><li><p><span style="color: rgb(33, 37, 41); font-family: 微軟正黑體; font-size: 18px; text-align: justify; background-color: rgb(255, 255, 255);">測試集有 418 筆資料、11 個特徵欄位；其中，訓練集較測試集多了判別乘客罹難或生還的特徵欄位 Survived，0 表示罹難者，1 表示生還者。</span></p></li></ul><pre class="brush:python;toolbar:false" style="padding: 15px 20px; border-radius: 3px; background-color: rgb(241, 241, 241); font-family: Menlo, &quot;Bitstream Vera Sans Mono&quot;, &quot;DejaVu Sans Mono&quot;, Monaco, Consolas, monospace; font-size: 12px; line-height: 1.5;">df_train&nbsp;=&nbsp;pd.read_csv('train.csv')
df_test&nbsp;=&nbsp;pd.read_csv('test.csv')
submit&nbsp;=&nbsp;pd.read_csv('gender_submission.csv')

print(&nbsp;f'train&nbsp;{df_train.shape}'&nbsp;)
display(&nbsp;df_train.head()&nbsp;)

print(&nbsp;f'\ntest&nbsp;{df_test.shape}'&nbsp;)
display(&nbsp;df_test.head()&nbsp;)</pre><h2 class="text-cell-section-header" style="color: rgb(33, 33, 33); font-family: Roboto, Noto, sans-serif; font-weight: 400; margin-bottom: 0.5em; position: relative; margin-top: 0.5em; font-size: 23px; white-space: normal; background-color: rgb(255, 255, 255);"><br></h2><h2 class="text-cell-section-header" style="color: rgb(33, 33, 33); font-family: Roboto, Noto, sans-serif; font-weight: 400; margin-bottom: 0.5em; position: relative; margin-top: 0.5em; font-size: 23px; white-space: normal; background-color: rgb(255, 255, 255);"><span style="font-size: 24px;"><strong><span style="font-size: 24px; color: rgb(33, 37, 41); font-family: 微軟正黑體; text-align: justify; background-color: rgb(255, 255, 255);">欄位型態(Column Types)</span></strong></span></h2><p style="color: rgb(33, 33, 33); margin-bottom: 6px; margin-top: 0.5em; font-family: Roboto, Noto, sans-serif; white-space: normal; background-color: rgb(255, 255, 255);"><span style="color: rgb(33, 37, 41); font-family: 微軟正黑體; font-size: 18px; text-align: justify; background-color: rgb(255, 255, 255);">我們透過自定義的函數 Col_Types，觀察訓練集與測試集共同的特徵欄位型態，數值型態的特徵欄位有 6 欄，非數值型態的特徵欄位有 5 欄，另外，Survived 欄位為數值型態。</span></p><pre class="brush:python;toolbar:false" style="padding: 15px 20px; border-radius: 3px; background-color: rgb(241, 241, 241); font-family: Menlo, &quot;Bitstream Vera Sans Mono&quot;, &quot;DejaVu Sans Mono&quot;, Monaco, Consolas, monospace; font-size: 12px; line-height: 1.5;">#&nbsp;定義判別欄位型態的函數
def&nbsp;Col_Types(&nbsp;Data&nbsp;):
&nbsp;&nbsp;&nbsp;&nbsp;Column_Types&nbsp;=&nbsp;Data.dtypes.to_frame().reset_index()&nbsp;&nbsp;&nbsp;#&nbsp;判別每個欄位的型態&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;Column_Types.columns&nbsp;=&nbsp;['ColumnName','Type']
&nbsp;&nbsp;&nbsp;&nbsp;Column_Types.sort_values(&nbsp;by='Type',&nbsp;inplace=True&nbsp;)&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;Column_Types</pre><pre class="brush:python;toolbar:false" style="padding: 15px 20px; border-radius: 3px; background-color: rgb(241, 241, 241); font-family: Menlo, &quot;Bitstream Vera Sans Mono&quot;, &quot;DejaVu Sans Mono&quot;, Monaco, Consolas, monospace; font-size: 12px; line-height: 1.5;">display(&nbsp;Col_Types(df_train)&nbsp;)</pre><h2 class="text-cell-section-header" style="color: rgb(33, 33, 33); font-family: Roboto, Noto, sans-serif; font-weight: 400; margin-bottom: 0.5em; position: relative; margin-top: 0.5em; font-size: 23px; white-space: normal; background-color: rgb(255, 255, 255);"><br></h2><h2 class="text-cell-section-header" style="color: rgb(33, 33, 33); font-family: Roboto, Noto, sans-serif; font-weight: 400; margin-bottom: 0.5em; position: relative; margin-top: 0.5em; font-size: 23px; white-space: normal; background-color: rgb(255, 255, 255);"><span style="font-size: 24px;"><strong><span style="font-size: 24px; color: rgb(33, 37, 41); font-family: 微軟正黑體; text-align: justify; background-color: rgb(255, 255, 255);">缺漏值(Missing Values)</span></strong></span></h2><p style="color: rgb(33, 33, 33); margin-bottom: 6px; margin-top: 0.5em; font-family: Roboto, Noto, sans-serif; white-space: normal; background-color: rgb(255, 255, 255);"><span style="color: rgb(33, 37, 41); font-family: 微軟正黑體; font-size: 18px; text-align: justify; background-color: rgb(255, 255, 255);">在分析資料之前，我們還需先檢視資料是否存有缺漏值(Missing Values)，如果欄位存有缺漏值，之後在特徵工程(Feature Engineering)的過程中，我們可視欄位中缺漏值的比例或對預測值的相關性，決定填補或排除此欄位的處理方法。<br>透過我們自定義的函數 Missing_Counts ，發現 Embarked、Fare、Cabin、Age 欄位有缺漏值，當中， Cabin 欄位的缺漏情況最為嚴重，訓練集中約有 77%、測試集中約有 78% 的缺漏值，其次為 Age 欄位，訓練集中約有 20%、測試集中約有 21% 的缺漏值。</span></p><pre class="brush:python;toolbar:false" style="padding: 15px 20px; border-radius: 3px; background-color: rgb(241, 241, 241); font-family: Menlo, &quot;Bitstream Vera Sans Mono&quot;, &quot;DejaVu Sans Mono&quot;, Monaco, Consolas, monospace; font-size: 12px; line-height: 1.5;">#&nbsp;定義用來統計欄位缺漏值總數的函數
def&nbsp;Missing_Counts(&nbsp;Data&nbsp;)&nbsp;:&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;missing&nbsp;=&nbsp;Data.isnull().sum()&nbsp;&nbsp;#&nbsp;計算欄位中缺漏值的數量&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;missing&nbsp;=&nbsp;missing[&nbsp;missing&gt;0&nbsp;]
&nbsp;&nbsp;&nbsp;&nbsp;missing.sort_values(&nbsp;inplace=True&nbsp;)&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;Missing_Count&nbsp;=&nbsp;pd.DataFrame(&nbsp;{&nbsp;'ColumnName':missing.index,&nbsp;'MissingCount':missing.values&nbsp;}&nbsp;)&nbsp;&nbsp;#&nbsp;Convert&nbsp;Series&nbsp;to&nbsp;DataFrame
&nbsp;&nbsp;&nbsp;&nbsp;Missing_Count[&nbsp;'Percentage(%)'&nbsp;]&nbsp;=&nbsp;Missing_Count['MissingCount'].apply(&nbsp;lambda&nbsp;x:round(x/Data.shape[0]*100,2)&nbsp;)
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&nbsp;Missing_Count</pre><pre class="brush:python;toolbar:false" style="padding: 15px 20px; border-radius: 3px; background-color: rgb(241, 241, 241); font-family: Menlo, &quot;Bitstream Vera Sans Mono&quot;, &quot;DejaVu Sans Mono&quot;, Monaco, Consolas, monospace; font-size: 12px; line-height: 1.5;">print(&nbsp;'train&nbsp;:'&nbsp;)
display(&nbsp;Missing_Counts(df_train)&nbsp;)

print(&nbsp;'test&nbsp;:'&nbsp;)
display(&nbsp;Missing_Counts(df_test)&nbsp;)</pre><h2 class="text-cell-section-header" style="color: rgb(33, 33, 33); font-family: Roboto, Noto, sans-serif; font-weight: 400; margin-bottom: 0.5em; position: relative; margin-top: 0.5em; font-size: 23px; white-space: normal; background-color: rgb(255, 255, 255);"><br></h2><h2 class="text-cell-section-header" style="color: rgb(33, 33, 33); font-family: Roboto, Noto, sans-serif; font-weight: 400; margin-bottom: 0.5em; position: relative; margin-top: 0.5em; font-size: 23px; white-space: normal; background-color: rgb(255, 255, 255);"><span style="font-size: 24px;"><strong><span style="font-size: 24px; color: rgb(33, 37, 41); font-family: 微軟正黑體; text-align: justify; background-color: rgb(255, 255, 255);">統計量(Statistic)</span></strong></span></h2><p style="color: rgb(33, 33, 33); margin-bottom: 6px; margin-top: 0.5em; font-family: Roboto, Noto, sans-serif; white-space: normal; background-color: rgb(255, 255, 255);"><span style="color: rgb(33, 37, 41); font-family: 微軟正黑體; font-size: 18px; text-align: justify; background-color: rgb(255, 255, 255);">利用 describe( ) 函數，我們可得到每個數值型態欄位的統計量，其用意是為往後我們在觀察欄位是否存有離群值(Outlier)時，作為一個判斷的參考依據，另外，也可用來觀察每個欄位的尺度(scale)是否相似，在餵資料進入模型訓練之前，決定是否需進行資料的正規化(Normalization)或標準化(Standardization)。</span></p><pre class="brush:python;toolbar:false" style="padding: 15px 20px; border-radius: 3px; background-color: rgb(241, 241, 241); font-family: Menlo, &quot;Bitstream Vera Sans Mono&quot;, &quot;DejaVu Sans Mono&quot;, Monaco, Consolas, monospace; font-size: 12px; line-height: 1.5;">print(&nbsp;'train'&nbsp;)
display(&nbsp;df_train.describe()&nbsp;)

print(&nbsp;'test'&nbsp;)
display(&nbsp;df_test.describe()&nbsp;)</pre><p style="white-space: normal;"><br></p><h2 class="text-cell-section-header" style="color: rgb(33, 33, 33); font-family: Roboto, Noto, sans-serif; font-weight: 400; margin-bottom: 0.5em; position: relative; margin-top: 0.5em; font-size: 23px; white-space: normal; background-color: rgb(255, 255, 255);"><span style="font-size: 24px;"><strong><span style="font-size: 24px; color: rgb(33, 37, 41); font-family: 微軟正黑體; text-align: justify; background-color: rgb(255, 255, 255);">資料分析(Data Analysis)</span></strong></span></h2><p style="color: rgb(33, 33, 33); margin-bottom: 6px; margin-top: 0.5em; font-family: Roboto, Noto, sans-serif; white-space: normal; background-color: rgb(255, 255, 255);"><span style="color: rgb(33, 37, 41); font-family: 微軟正黑體; font-size: 18px; text-align: justify; background-color: rgb(255, 255, 255);">在大致瞭解資料的基本態樣後，我們便可開始對資料做一些關聯性分析。由於是對整體資料進行分析，因此我們先使用 append( ) 函數將訓練集與測試集合併，方便後續一併修補或調整資料。</span></p><pre class="brush:python;toolbar:false" style="padding: 15px 20px; border-radius: 3px; background-color: rgb(241, 241, 241); font-family: Menlo, &quot;Bitstream Vera Sans Mono&quot;, &quot;DejaVu Sans Mono&quot;, Monaco, Consolas, monospace; font-size: 12px; line-height: 1.5;">#&nbsp;合併train及test的資料&nbsp;
df_data&nbsp;=&nbsp;df_train.append(&nbsp;df_test&nbsp;)
df_data</pre><h3 class="text-cell-section-header" style="color: var(--colab-primary-text-color); font-family: var(--colab-chrome-font-family); font-weight: 400; margin-bottom: 0.5em; position: relative; margin-top: 0.5em; font-size: 20px;"><br></h3><h3 class="text-cell-section-header" style="color: var(--colab-primary-text-color); font-family: var(--colab-chrome-font-family); font-weight: 400; margin-bottom: 0.5em; position: relative; margin-top: 0.5em; font-size: 20px;"><span style="font-size: 24px;"><strong><span style="font-size: 24px; color: rgb(33, 37, 41); font-family: 微軟正黑體; text-align: justify; background-color: rgb(255, 255, 255);">生還者的比率(Survival Ratio)</span></strong></span></h3><p style="color: var(--colab-primary-text-color); margin-bottom: 6px; margin-top: 0.5em;"><span style="color: rgb(33, 37, 41); font-family: 微軟正黑體; font-size: 18px; text-align: justify; background-color: rgb(255, 255, 255);">首先，我們分析生還者與罹難者的比例是否有明顯極大的落差，比如生還者的比例僅有 1%，若資料有極大的落差時，表示存在『數據不平衡』(Imbalanced Data)的問題，則後續需用特別的方法對資料進行抽樣。利用 value_counts( ) 函數，我們可以計算欄位中各相異類別的數量，船難中的生還者約佔全體乘客的 38.38%、罹難者約佔 61.62%。</span></p><hr style="border-right: 2px solid darkgrey; border-bottom: 2px solid darkgrey; border-left: 2px solid darkgrey; border-top: 2px none; position: absolute; top: 0px; transition: visibility 0s ease 250ms; visibility: hidden; width: 260px; margin-top: 3px;"><p><span class="imported-info-area" style="color: rgb(33, 33, 33); font-family: Roboto, Noto, sans-serif; font-size: 14px;"></span></p><pre class="brush:python;toolbar:false" style="padding: 15px 20px; border-radius: 3px; background-color: rgb(241, 241, 241); font-family: Menlo, &quot;Bitstream Vera Sans Mono&quot;, &quot;DejaVu Sans Mono&quot;, Monaco, Consolas, monospace; font-size: 12px; line-height: 1.5;">Survived_Counts&nbsp;=&nbsp;df_data['Survived'].value_counts().reset_index()
Survived_Counts.columns&nbsp;=&nbsp;['Survived','Counts']
Survived_Counts</pre><pre class="brush:python;toolbar:false" style="padding: 15px 20px; border-radius: 3px; background-color: rgb(241, 241, 241); font-family: Menlo, &quot;Bitstream Vera Sans Mono&quot;, &quot;DejaVu Sans Mono&quot;, Monaco, Consolas, monospace; font-size: 12px; line-height: 1.5;">plt.figure(&nbsp;figsize=(10,5)&nbsp;)
df_data['Survived'].value_counts().plot(&nbsp;kind='pie',&nbsp;colors=['lightcoral','skyblue'],&nbsp;autopct='%1.2f%%'&nbsp;)
plt.title(&nbsp;'Survival'&nbsp;)&nbsp;&nbsp;#&nbsp;圖標題
plt.ylabel(&nbsp;''&nbsp;)
plt.show()</pre><p style="white-space: normal; text-align: center;"><img src="https://raw.githubusercontent.com/chenkenanalytic/img/master/da-titanic/1.png" style="font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-size: 36px;"></p><h3 class="text-cell-section-header" style="color: rgb(33, 33, 33); font-family: Roboto, Noto, sans-serif; font-weight: 400; margin-bottom: 0.5em; position: relative; margin-top: 0.5em; font-size: 20px; white-space: normal; background-color: rgb(255, 255, 255);"><span style="font-size: 24px;"><strong><span style="font-size: 24px; color: rgb(33, 37, 41); font-family: 微軟正黑體; text-align: justify; background-color: rgb(255, 255, 255);">相關係數(Correlation)</span></strong></span></h3><p style="color: rgb(33, 33, 33); margin-bottom: 6px; margin-top: 0.5em; font-family: Roboto, Noto, sans-serif; white-space: normal; background-color: rgb(255, 255, 255);"><span style="color: rgb(33, 37, 41); font-family: 微軟正黑體; font-size: 18px; text-align: justify; background-color: rgb(255, 255, 255);">利用 corr( ) 函數，計算特徵欄位彼此間的相關係數，可作為後續決定篩選哪些特徵欄位，來餵入模型進行訓練。觀察 Survived 欄位與其他特徵欄位的相關係數，發覺彼此間並無明顯的線性關係。</span></p><pre class="brush:python;toolbar:false" style="padding: 15px 20px; border-radius: 3px; background-color: rgb(241, 241, 241); font-family: Menlo, &quot;Bitstream Vera Sans Mono&quot;, &quot;DejaVu Sans Mono&quot;, Monaco, Consolas, monospace; font-size: 12px; line-height: 1.5;">#&nbsp;Survied&nbsp;與其他欄位間的相關係數
Corr_Matrix&nbsp;=&nbsp;df_train.corr()&nbsp;&nbsp;#&nbsp;計算相關係數
Corr&nbsp;=&nbsp;Corr_Matrix.loc['Survived',:].sort_values()[:-1]
Corr&nbsp;=&nbsp;pd.DataFrame({&nbsp;'Survived':Corr&nbsp;})
Corr</pre><h3 class="text-cell-section-header" style="color: rgb(33, 33, 33); font-family: Roboto, Noto, sans-serif; font-weight: 400; margin-bottom: 0.5em; position: relative; margin-top: 0.5em; font-size: 20px; white-space: normal; background-color: rgb(255, 255, 255);"><br></h3><h3 class="text-cell-section-header" style="color: rgb(33, 33, 33); font-family: Roboto, Noto, sans-serif; font-weight: 400; margin-bottom: 0.5em; position: relative; margin-top: 0.5em; font-size: 20px; white-space: normal; background-color: rgb(255, 255, 255);"><span style="font-size: 24px;"><strong><span style="font-size: 24px; color: rgb(33, 37, 41); font-family: 微軟正黑體; text-align: justify; background-color: rgb(255, 255, 255);">生存率(Survival Rate)</span></strong></span></h3><p style="color: rgb(33, 33, 33); margin-bottom: 6px; margin-top: 0.5em; font-family: Roboto, Noto, sans-serif; white-space: normal; background-color: rgb(255, 255, 255);"><span style="color: rgb(33, 37, 41); font-family: 微軟正黑體; font-size: 18px; text-align: justify; background-color: rgb(255, 255, 255);">接下來，我們分別觀察性別(Sex)、票務艙(Pclass)、登船港口(Embarked)、兄弟姊妹配偶人數(SibSp)、父母子女人數(Parch)與生存率的關係。</span></p><pre class="brush:python;toolbar:false" style="padding: 15px 20px; border-radius: 3px; background-color: rgb(241, 241, 241); font-family: Menlo, &quot;Bitstream Vera Sans Mono&quot;, &quot;DejaVu Sans Mono&quot;, Monaco, Consolas, monospace; font-size: 12px; line-height: 1.5;">#&nbsp;Sex性別、Pclass票務艙、Embarked登船港口、SibSp兄弟姊妹配偶人數、Parch父母子女人數
selected_cols&nbsp;=&nbsp;['Sex','Pclass','Embarked','SibSp','Parch']

plt.figure(&nbsp;figsize=(10,len(selected_cols)*5)&nbsp;)
gs&nbsp;=&nbsp;gridspec.GridSpec(len(selected_cols),1)&nbsp;&nbsp;&nbsp;&nbsp;
for&nbsp;i,&nbsp;col&nbsp;in&nbsp;enumerate(&nbsp;df_data[selected_cols]&nbsp;)&nbsp;:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;ax&nbsp;=&nbsp;plt.subplot(&nbsp;gs[i]&nbsp;)
&nbsp;&nbsp;&nbsp;&nbsp;sns.countplot(&nbsp;df_data[col],&nbsp;hue=df_data.Survived,&nbsp;palette=['lightcoral','skyblue']&nbsp;)
&nbsp;&nbsp;&nbsp;&nbsp;ax.set_yticklabels([])
&nbsp;&nbsp;&nbsp;&nbsp;ax.set_ylabel(&nbsp;'Counts'&nbsp;)
&nbsp;&nbsp;&nbsp;&nbsp;ax.legend(&nbsp;loc=1&nbsp;)&nbsp;&nbsp;&nbsp;#&nbsp;upper&nbsp;right:1&nbsp;;&nbsp;upper&nbsp;left:2
&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;p&nbsp;in&nbsp;ax.patches:
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ax.annotate(&nbsp;'{:,}'.format(p.get_height()),&nbsp;(p.get_x(),&nbsp;p.get_height()+1.5)&nbsp;)
plt.show()</pre><p style="white-space: normal; text-align: center;"><img src="https://raw.githubusercontent.com/chenkenanalytic/img/master/da-titanic/2.png" style="font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-size: 36px;"></p><pre class="brush:python;toolbar:false" style="padding: 15px 20px; border-radius: 3px; background-color: rgb(241, 241, 241); font-family: Menlo, &quot;Bitstream Vera Sans Mono&quot;, &quot;DejaVu Sans Mono&quot;, Monaco, Consolas, monospace; font-size: 12px; line-height: 1.5;">for&nbsp;col&nbsp;in&nbsp;selected_cols:
&nbsp;&nbsp;&nbsp;&nbsp;l&nbsp;=&nbsp;['Survived']
&nbsp;&nbsp;&nbsp;&nbsp;l.append(col)&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;Survival_Rate&nbsp;=&nbsp;df_data[l].groupby(by=col).mean().round(4).reset_index()
&nbsp;&nbsp;&nbsp;&nbsp;Survival_Rate.columns&nbsp;=&nbsp;[col,'Survival&nbsp;Rate(%)']
&nbsp;&nbsp;&nbsp;&nbsp;Survival_Rate['Survival&nbsp;Rate(%)']&nbsp;=&nbsp;Survival_Rate['Survival&nbsp;Rate(%)'].map(&nbsp;lambda&nbsp;x:x*100&nbsp;)
&nbsp;&nbsp;&nbsp;&nbsp;display(&nbsp;Survival_Rate&nbsp;)</pre><p style="color: var(--colab-primary-text-color); margin-bottom: 6px; margin-top: 0.5em;"><br></p><p style="color: var(--colab-primary-text-color); margin-bottom: 6px; margin-top: 0.5em;"><span style="color: rgb(33, 37, 41); font-family: 微軟正黑體; font-size: 18px; text-align: justify; background-color: rgb(255, 255, 255);">透過上列的長條圖(Bar Plot)與統計表，我們可得到下列的觀察：</span></p><ul style="color: var(--colab-primary-text-color); margin-bottom: 6px; margin-top: 0.5em;" class=" list-paddingleft-2"><li><p><span style="color: rgb(33, 37, 41); font-family: 微軟正黑體; font-size: 18px; text-align: justify; background-color: rgb(255, 255, 255);">女性的生存率明顯高於男性；</span></p></li><li><p><span style="color: rgb(33, 37, 41); font-family: 微軟正黑體; font-size: 18px; text-align: justify; background-color: rgb(255, 255, 255);">票務艙(</span><nobr style="transition: none 0s ease 0s; border: 0px; padding: 0px; margin: 0px; max-width: none; max-height: none; min-width: 0px; min-height: 0px; vertical-align: 0px; line-height: normal;"><span style="color: rgb(33, 37, 41); font-family: 微軟正黑體; font-size: 18px; text-align: justify; background-color: rgb(255, 255, 255);">Pclass</span></nobr><span style="color: rgb(33, 37, 41); font-family: 微軟正黑體; font-size: 18px; text-align: justify; background-color: rgb(255, 255, 255);">)的生存率大小: Pclass 1 &gt; Pclass 2 &gt; Pclasss 3；</span></p></li><li><p><span style="color: rgb(33, 37, 41); font-family: 微軟正黑體; font-size: 18px; text-align: justify; background-color: rgb(255, 255, 255);">登船港口(</span><nobr style="transition: none 0s ease 0s; border: 0px; padding: 0px; margin: 0px; max-width: none; max-height: none; min-width: 0px; min-height: 0px; vertical-align: 0px; line-height: normal;"><span style="color: rgb(33, 37, 41); font-family: 微軟正黑體; font-size: 18px; text-align: justify; background-color: rgb(255, 255, 255);">Embarked</span></nobr><span style="color: rgb(33, 37, 41); font-family: 微軟正黑體; font-size: 18px; text-align: justify; background-color: rgb(255, 255, 255);">)的生存率以 C 最高；</span></p></li><li><p><span style="color: rgb(33, 37, 41); font-family: 微軟正黑體; font-size: 18px; text-align: justify; background-color: rgb(255, 255, 255);">當船上的兄弟姐妹配偶人數(</span><nobr style="transition: none 0s ease 0s; border: 0px; padding: 0px; margin: 0px; max-width: none; max-height: none; min-width: 0px; min-height: 0px; vertical-align: 0px; line-height: normal;"><span style="color: rgb(33, 37, 41); font-family: 微軟正黑體; font-size: 18px; text-align: justify; background-color: rgb(255, 255, 255);">SibSp</span></nobr><span style="color: rgb(33, 37, 41); font-family: 微軟正黑體; font-size: 18px; text-align: justify; background-color: rgb(255, 255, 255);">)有 1 人同行時，則生存率較高；</span></p></li><li><p><span style="color: rgb(33, 37, 41); font-family: 微軟正黑體; font-size: 18px; text-align: justify; background-color: rgb(255, 255, 255);">當船上的父母子女人數(</span><nobr style="transition: none 0s ease 0s; border: 0px; padding: 0px; margin: 0px; max-width: none; max-height: none; min-width: 0px; min-height: 0px; vertical-align: 0px; line-height: normal;"><span style="color: rgb(33, 37, 41); font-family: 微軟正黑體; font-size: 18px; text-align: justify; background-color: rgb(255, 255, 255);">Parch</span></nobr><span style="color: rgb(33, 37, 41); font-family: 微軟正黑體; font-size: 18px; text-align: justify; background-color: rgb(255, 255, 255);">)為 1~3 人時，有較高的生存率。</span></p></li></ul><p><br></p><p><span style="color: rgb(33, 37, 41); font-family: 微軟正黑體; font-size: 18px; text-align: justify; background-color: rgb(255, 255, 255);">由於 SibSp 與 Parch 欄位所記錄的人數皆屬於家庭成員，所以我們將兩者相加創造新的特徵欄位稱家庭人數(Family_Size)，並觀察 Family_Size 與生存率的關係，發現當家庭人數為4時的生存率(約 72.4%)明顯高於其他人數。</span></p><p><span style="color: rgb(33, 33, 33); font-family: Roboto, Noto, sans-serif; background-color: rgb(255, 255, 255);"></span></p><pre class="brush:python;toolbar:false" style="padding: 15px 20px; border-radius: 3px; background-color: rgb(241, 241, 241); font-family: Menlo, &quot;Bitstream Vera Sans Mono&quot;, &quot;DejaVu Sans Mono&quot;, Monaco, Consolas, monospace; font-size: 12px; line-height: 1.5;">#&nbsp;創造新的特徵變數：家庭人數(Family_Size)
df_data['Family_Size']&nbsp;=&nbsp;df_data['SibSp']&nbsp;+&nbsp;df_data['Parch']&nbsp;+&nbsp;1

Survival_Rate&nbsp;=&nbsp;df_data[['Family_Size','Survived']].groupby(by=['Family_Size']).agg(np.mean)*100
Survival_Rate.columns&nbsp;=&nbsp;['Survival&nbsp;Rate(%)']
Survival_Rate.reset_index()</pre><p><br></p><p><span style="color: rgb(33, 37, 41); font-family: 微軟正黑體; font-size: 18px; text-align: justify; background-color: rgb(255, 255, 255);">透過上列 Family_Size 欄位與生存率的關係，我們將 Family_Size 的生存率做級別的區分(3 表示生存率最高、1 為最低)。</span><span style="color: rgb(33, 33, 33); font-family: Roboto, Noto, sans-serif; background-color: rgb(255, 255, 255);"></span><br></p><p><span style="color: rgb(33, 33, 33); font-family: Roboto, Noto, sans-serif; background-color: rgb(255, 255, 255);"></span></p><pre class="brush:python;toolbar:false" style="padding: 15px 20px; border-radius: 3px; background-color: rgb(241, 241, 241); font-family: Menlo, &quot;Bitstream Vera Sans Mono&quot;, &quot;DejaVu Sans Mono&quot;, Monaco, Consolas, monospace; font-size: 12px; line-height: 1.5;">df_data[&nbsp;'Family_Class'&nbsp;]&nbsp;=&nbsp;np.nan

df_data.loc[&nbsp;df_data.Family_Size==0,&nbsp;'Family_Class'&nbsp;]&nbsp;=&nbsp;2
df_data.loc[&nbsp;(df_data.Family_Size&gt;=1)&nbsp;&amp;&nbsp;(df_data.Family_Size&lt;=3),&nbsp;'Family_Class'&nbsp;]&nbsp;=&nbsp;3
df_data.loc[&nbsp;(df_data.Family_Size&gt;=4)&nbsp;&amp;&nbsp;(df_data.Family_Size&lt;=6),&nbsp;'Family_Class'&nbsp;]&nbsp;=&nbsp;2
df_data.loc[&nbsp;(df_data.Family_Size&gt;=7),&nbsp;'Family_Class'&nbsp;]&nbsp;=&nbsp;1</pre><p><br></p><p><span style="color: rgb(33, 37, 41); font-family: 微軟正黑體; font-size: 18px; text-align: justify; background-color: rgb(255, 255, 255);">另外，就整體而言，女性乘客的生存率(74%)明顯高於男性(19%)，此時我們想更深入探討，在不同票務艙(Pclass)中的男性及女性，生存率是否也有明顯的差別？我們發現在 Pclass 1 與 Pclass 2 中，男女的生存率差異性更是明顯！！其中，在 Pclass 1 中的女性乘客生存率更是高達約 97%。</span></p><p><span style="color: rgb(33, 33, 33); font-family: Roboto, Noto, sans-serif; background-color: rgb(255, 255, 255);"></span></p><pre class="brush:python;toolbar:false" style="padding: 15px 20px; border-radius: 3px; background-color: rgb(241, 241, 241); font-family: Menlo, &quot;Bitstream Vera Sans Mono&quot;, &quot;DejaVu Sans Mono&quot;, Monaco, Consolas, monospace; font-size: 12px; line-height: 1.5;">#&nbsp;Sex&nbsp;&amp;&nbsp;Pclass&nbsp;
Survival_Rate&nbsp;=&nbsp;df_data[['Sex','Pclass','Survived']].groupby(by=['Sex','Pclass']).agg(np.mean)*100
Survival_Rate.columns&nbsp;=&nbsp;['Survival&nbsp;Rate(%)']
Survival_Rate.reset_index()</pre><p><span style="color: rgb(33, 33, 33); font-family: Roboto, Noto, sans-serif; background-color: rgb(255, 255, 255);"></span><br></p><p><span style="color: rgb(33, 37, 41); font-family: 微軟正黑體; font-size: 18px; text-align: justify; background-color: rgb(255, 255, 255);">相似的手法，我們依據在不同艙等中的男女性生存率，給予不同的生存率級別(3最高、1最小)：</span></p><p><span style="color: rgb(33, 33, 33); font-family: Roboto, Noto, sans-serif; background-color: rgb(255, 255, 255);"></span></p><pre class="brush:python;toolbar:false" style="padding: 15px 20px; border-radius: 3px; background-color: rgb(241, 241, 241); font-family: Menlo, &quot;Bitstream Vera Sans Mono&quot;, &quot;DejaVu Sans Mono&quot;, Monaco, Consolas, monospace; font-size: 12px; line-height: 1.5;">df_data[&nbsp;'Sex_Pclass'&nbsp;]&nbsp;=&nbsp;np.nan
df_data.loc[&nbsp;(df_data.Sex=='female')&nbsp;&amp;&nbsp;(df_data.Pclass==1),&nbsp;'Sex_Pclass'&nbsp;]&nbsp;=&nbsp;2
df_data.loc[&nbsp;(df_data.Sex=='female')&nbsp;&amp;&nbsp;(df_data.Pclass==2),&nbsp;'Sex_Pclass'&nbsp;]&nbsp;=&nbsp;3
df_data.loc[&nbsp;(df_data.Sex=='female')&nbsp;&amp;&nbsp;(df_data.Pclass==3),&nbsp;'Sex_Pclass'&nbsp;]&nbsp;=&nbsp;3
df_data.loc[&nbsp;(df_data.Sex=='male')&nbsp;&amp;&nbsp;(df_data.Pclass==1),&nbsp;'Sex_Pclass'&nbsp;]&nbsp;=&nbsp;1
df_data.loc[&nbsp;(df_data.Sex=='male')&nbsp;&amp;&nbsp;(df_data.Pclass==2),&nbsp;'Sex_Pclass'&nbsp;]&nbsp;=&nbsp;1
df_data.loc[&nbsp;(df_data.Sex=='male')&nbsp;&amp;&nbsp;(df_data.Pclass==3),&nbsp;'Sex_Pclass'&nbsp;]&nbsp;=&nbsp;2</pre><p><span style="color: rgb(33, 33, 33); font-family: Roboto, Noto, sans-serif; background-color: rgb(255, 255, 255);"></span><br></p><h2 class="text-cell-section-header" style="color: rgb(33, 33, 33); font-family: Roboto, Noto, sans-serif; font-weight: 400; margin-bottom: 0.5em; position: relative; margin-top: 0.5em; font-size: 23px; white-space: normal; background-color: rgb(255, 255, 255);"><span style="font-size: 24px;"><strong><span style="font-size: 24px; color: rgb(33, 37, 41); font-family: 微軟正黑體; text-align: justify; background-color: rgb(255, 255, 255);">特徵工程(Feature Engineering)</span></strong></span></h2><p style="color: rgb(33, 33, 33); margin-bottom: 6px; margin-top: 0.5em; font-family: Roboto, Noto, sans-serif; white-space: normal; background-color: rgb(255, 255, 255);"><span style="color: rgb(33, 37, 41); font-family: 微軟正黑體; font-size: 18px; text-align: justify; background-color: rgb(255, 255, 255);">在分析觀察完資料後，我們接著將處理一些無法直接餵入模型的特徵欄位，例如： Name 欄位為字串、Cabin 欄位中存有大量的缺漏值等。</span></p><p><br></p><h3 class="text-cell-section-header" style="color: rgb(33, 33, 33); font-family: Roboto, Noto, sans-serif; font-weight: 400; margin-bottom: 0.5em; position: relative; margin-top: 0.5em; font-size: 20px; white-space: normal; background-color: rgb(255, 255, 255);"><span style="font-size: 20px;"><strong><span style="color: rgb(33, 37, 41); font-family: 微軟正黑體; text-align: justify; background-color: rgb(255, 255, 255);">(1) 字串欄位處理</span></strong></span></h3><h4 class="text-cell-section-header" style="color: rgb(33, 33, 33); font-family: Roboto, Noto, sans-serif; font-weight: 400; margin-bottom: 0.5em; position: relative; margin-top: 0.5em; font-size: 18px; white-space: normal; background-color: rgb(255, 255, 255);"><strong><span style="color: rgb(33, 37, 41); font-family: 微軟正黑體; font-size: 18px; text-align: justify; background-color: rgb(255, 255, 255);">Name (姓名)</span></strong></h4><p style="color: rgb(33, 33, 33); margin-bottom: 6px; margin-top: 0.5em; font-family: Roboto, Noto, sans-serif; white-space: normal; background-color: rgb(255, 255, 255);"><span style="color: rgb(33, 37, 41); font-family: 微軟正黑體; font-size: 18px; text-align: justify; background-color: rgb(255, 255, 255);">首先，我們可先觀察 Name 欄位，發現可以擷取出稱謂(Title)的資訊，來幫助提升模型預測的準確度。一般在處理字串資料時，常用的函數有 split( )、repalce( ) 等來分割或取代字串中的文字，再比較程式語法化的方法可參考正規表示法(Regular Expression)，這裏我們分別練習兩種方法：split( ) 與正規表示法，來擷取出 Name 欄位中的稱謂，產生的結果將僅有一個不同，其他皆完全相同：</span></p><pre class="brush:python;toolbar:false" style="padding: 15px 20px; border-radius: 3px; background-color: rgb(241, 241, 241); font-family: Menlo, &quot;Bitstream Vera Sans Mono&quot;, &quot;DejaVu Sans Mono&quot;, Monaco, Consolas, monospace; font-size: 12px; line-height: 1.5;">#&nbsp;Method&nbsp;1:&nbsp;split()
df_data['Title']&nbsp;=&nbsp;df_data.Name.str.split(',&nbsp;',&nbsp;expand=True)[1]
df_data['Title']&nbsp;=&nbsp;df_data.Title.str.split('.',&nbsp;expand=True)[0]
df_data['Title'].unique()</pre><pre class="brush:python;toolbar:false" style="padding: 15px 20px; border-radius: 3px; background-color: rgb(241, 241, 241); font-family: Menlo, &quot;Bitstream Vera Sans Mono&quot;, &quot;DejaVu Sans Mono&quot;, Monaco, Consolas, monospace; font-size: 12px; line-height: 1.5;">#&nbsp;Method&nbsp;2:&nbsp;正規表示法(Regular&nbsp;Expression)
import&nbsp;re

regex&nbsp;=&nbsp;re.compile(&nbsp;'&nbsp;([A-Za-z]+)\.'&nbsp;)&nbsp;&nbsp;
df_data['Title']&nbsp;=&nbsp;df_data.Name.map(&nbsp;lambda&nbsp;x:regex.search(x)[0]&nbsp;)
#&nbsp;Dropping&nbsp;the&nbsp;first&nbsp;and&nbsp;the&nbsp;last&nbsp;words
df_data['Title']&nbsp;=&nbsp;df_data.Title.map(&nbsp;lambda&nbsp;x:x[1:][:-1]&nbsp;)&nbsp;&nbsp;
df_data['Title'].unique()</pre><p><br></p><p><span style="color: rgb(33, 37, 41); font-family: 微軟正黑體; font-size: 18px; text-align: justify; background-color: rgb(255, 255, 255);">將同樣性別或關係的稱謂合併，避免產生某些稱謂僅有少數乘客，例如：Rev(Reverend)為牧師的尊稱、Countess為伯爵夫人等，影響模型的預測準確度。這裏我們將利用 replace( ) 函數，將上述擷取出的稱謂總歸為五類：Mr、Mrs、Miss、Master、Rare。</span></p><p><span style="color: rgb(33, 33, 33); font-family: Roboto, Noto, sans-serif; background-color: rgb(255, 255, 255);"></span></p><pre class="brush:python;toolbar:false" style="padding: 15px 20px; border-radius: 3px; background-color: rgb(241, 241, 241); font-family: Menlo, &quot;Bitstream Vera Sans Mono&quot;, &quot;DejaVu Sans Mono&quot;, Monaco, Consolas, monospace; font-size: 12px; line-height: 1.5;">df_data['Title']&nbsp;=&nbsp;df_data.Title.replace(&nbsp;['Don','Rev','Dr','Major','Lady','Sir','Col','Capt','Countess','Jonkheer','Dona'],&nbsp;'Rare'&nbsp;)
df_data['Title']&nbsp;=&nbsp;df_data.Title.replace(&nbsp;['Ms','Mlle'],&nbsp;'Miss'&nbsp;)
df_data['Title']&nbsp;=&nbsp;df_data.Title.replace(&nbsp;'Mme',&nbsp;'Mrs'&nbsp;)
df_data['Title'].unique()</pre><pre class="brush:python;toolbar:false" style="padding: 15px 20px; border-radius: 3px; background-color: rgb(241, 241, 241); font-family: Menlo, &quot;Bitstream Vera Sans Mono&quot;, &quot;DejaVu Sans Mono&quot;, Monaco, Consolas, monospace; font-size: 12px; line-height: 1.5;">#&nbsp;刪除原始資料中的&nbsp;Name&nbsp;欄位&nbsp;
df_data.drop(&nbsp;'Name',&nbsp;axis=1,&nbsp;inplace=True&nbsp;)</pre><p><span style="color: rgb(33, 33, 33); font-family: Roboto, Noto, sans-serif; background-color: rgb(255, 255, 255);"></span><br></p><h4 class="text-cell-section-header" style="color: rgb(33, 33, 33); font-family: Roboto, Noto, sans-serif; font-weight: 400; margin-bottom: 0.5em; position: relative; margin-top: 0.5em; font-size: 18px; white-space: normal; background-color: rgb(255, 255, 255);"><span style="font-size: 18px;"><strong><span style="color: rgb(33, 37, 41); font-family: 微軟正黑體; text-align: justify; background-color: rgb(255, 255, 255);">船票號碼(Ticket)</span></strong></span></h4><p style="color: rgb(33, 33, 33); margin-bottom: 6px; margin-top: 0.5em; font-family: Roboto, Noto, sans-serif; white-space: normal; background-color: rgb(255, 255, 255);"><span style="color: rgb(33, 37, 41); font-family: 微軟正黑體; font-size: 18px; text-align: justify; background-color: rgb(255, 255, 255);">另外，我們合理假設 Ticket 中，前面英文字母的部份代表房間位於相同的區域中，我們再次利用 split( ) 及 repalce( ) 函數，來擷取 Ticket 字串中前面英文字母的部份文字訊息，作為乘客艙房的位置分區。</span></p><pre class="brush:python;toolbar:false" style="padding: 15px 20px; border-radius: 3px; background-color: rgb(241, 241, 241); font-family: Menlo, &quot;Bitstream Vera Sans Mono&quot;, &quot;DejaVu Sans Mono&quot;, Monaco, Consolas, monospace; font-size: 12px; line-height: 1.5;">df_data['Ticket_info']&nbsp;=&nbsp;df_data.Ticket.apply(&nbsp;lambda&nbsp;x:x.replace('.','').replace('/','').strip().split('&nbsp;')[0]&nbsp;if&nbsp;not&nbsp;x.isdigit()&nbsp;else&nbsp;'X')
df_data['Ticket_info'].unique()</pre><pre class="brush:python;toolbar:false" style="padding: 15px 20px; border-radius: 3px; background-color: rgb(241, 241, 241); font-family: Menlo, &quot;Bitstream Vera Sans Mono&quot;, &quot;DejaVu Sans Mono&quot;, Monaco, Consolas, monospace; font-size: 12px; line-height: 1.5;">#&nbsp;刪除原始資料中的&nbsp;Ticket&nbsp;欄位&nbsp;
df_data.drop(&nbsp;'Ticket',&nbsp;axis=1,&nbsp;inplace=True&nbsp;)</pre><p><br></p><h3 class="text-cell-section-header" style="color: rgb(33, 33, 33); font-family: Roboto, Noto, sans-serif; font-weight: 400; margin-bottom: 0.5em; position: relative; margin-top: 0.5em; font-size: 20px; white-space: normal; background-color: rgb(255, 255, 255);"><strong><span style="color: rgb(33, 37, 41); font-family: 微軟正黑體; text-align: justify; background-color: rgb(255, 255, 255); font-size: 20px;">(2) 填補缺漏值(Missing Values)</span></strong></h3><p style="color: rgb(33, 33, 33); margin-bottom: 6px; margin-top: 0.5em; font-family: Roboto, Noto, sans-serif; white-space: normal; background-color: rgb(255, 255, 255);"><span style="color: rgb(33, 37, 41); font-family: 微軟正黑體; font-size: 18px; text-align: justify; background-color: rgb(255, 255, 255);">針對存有缺漏值的欄位：Embarked、Fare、Cabin 及 Age 進行補值。一般而言，我們常選擇用平均值(Mean)、中位數(Median)或眾數(Mode)等補值，且利用 fillna( ) 函數來執行填補的動作，另外，較為進階的做法是透過機器學習模型進行補值，如：線性迴歸模型(Linear Regression)、決策樹(Decision Tree Regressor)等。<br>在補缺漏值前，我們再次查看整體資料的缺漏值分佈情況：</span></p><pre class="brush:python;toolbar:false" style="padding: 15px 20px; border-radius: 3px; background-color: rgb(241, 241, 241); font-family: Menlo, &quot;Bitstream Vera Sans Mono&quot;, &quot;DejaVu Sans Mono&quot;, Monaco, Consolas, monospace; font-size: 12px; line-height: 1.5;">Missing_Counts(&nbsp;df_data.drop('Survived',&nbsp;axis=1)&nbsp;)</pre><p><br></p><h4 class="text-cell-section-header" style="color: rgb(33, 33, 33); font-family: Roboto, Noto, sans-serif; font-weight: 400; margin-bottom: 0.5em; position: relative; margin-top: 0.5em; font-size: 18px; white-space: normal; background-color: rgb(255, 255, 255);"><span style="font-size: 18px;"><strong><span style="font-size: 18px; color: rgb(33, 37, 41); font-family: 微軟正黑體; text-align: justify; background-color: rgb(255, 255, 255);">票價(Fare) : 填補整體票價的中位數</span></strong></span></h4><pre class="brush:python;toolbar:false" style="padding: 15px 20px; border-radius: 3px; background-color: rgb(241, 241, 241); font-family: Menlo, &quot;Bitstream Vera Sans Mono&quot;, &quot;DejaVu Sans Mono&quot;, Monaco, Consolas, monospace; font-size: 12px; line-height: 1.5;">df_data['Fare'].fillna(&nbsp;df_data.Fare.median(),&nbsp;inplace=True&nbsp;)</pre><p><br></p><h4 class="text-cell-section-header" style="color: rgb(33, 33, 33); font-family: Roboto, Noto, sans-serif; font-weight: 400; margin-bottom: 0.5em; position: relative; margin-top: 0.5em; font-size: 18px; white-space: normal; background-color: rgb(255, 255, 255);"><span style="font-size: 18px;"><strong><span style="font-size: 18px; color: rgb(33, 37, 41); font-family: 微軟正黑體; text-align: justify; background-color: rgb(255, 255, 255);">登船港口(Embarked) : 填補次數最多的港口 'S'</span></strong></span></h4><pre class="brush:python;toolbar:false" style="padding: 15px 20px; border-radius: 3px; background-color: rgb(241, 241, 241); font-family: Menlo, &quot;Bitstream Vera Sans Mono&quot;, &quot;DejaVu Sans Mono&quot;, Monaco, Consolas, monospace; font-size: 12px; line-height: 1.5;">#&nbsp;計算&nbsp;Embarked&nbsp;欄位中每個相異值的次數
display(&nbsp;df_data['Embarked'].value_counts()&nbsp;)
#&nbsp;填補&nbsp;Embarked&nbsp;欄位的缺漏值
df_data['Embarked'].fillna(&nbsp;'S',&nbsp;inplace=True&nbsp;)</pre><p><br></p><h4 class="text-cell-section-header" style="color: var(--colab-primary-text-color); font-family: var(--colab-chrome-font-family); font-weight: 400; margin-bottom: 0.5em; position: relative; margin-top: 0.5em; font-size: 18px;"><span style="font-size: 18px;"><strong><span style="font-size: 18px; color: rgb(33, 37, 41); font-family: 微軟正黑體; text-align: justify; background-color: rgb(255, 255, 255);">年齡(Age) :</span></strong></span></h4><p style="color: var(--colab-primary-text-color); margin-bottom: 6px; margin-top: 0.5em;"><span style="font-size: 18px;"><span style="font-size: 18px; color: rgb(33, 37, 41); font-family: 微軟正黑體; text-align: justify; background-color: rgb(255, 255, 255);">因為 Age 欄位的缺漏值佔比約有 20% ，不像前面 Fare 及 Embarked 欄位中僅有少數不到 1% 的缺漏值，因此我們所填補缺漏的值可能會影響預測的結果。此時，我們先藉由 Age 搭配 Sex 或 Pclass 欄位，觀察缺漏值分布的情況，檢視缺漏值是否集中發生在某類特別的乘客當中？</span></span></p><hr style="border-right: 2px solid darkgrey; border-bottom: 2px solid darkgrey; border-left: 2px solid darkgrey; border-top: 2px none; position: absolute; top: 0px; transition: visibility 0s ease 250ms; visibility: hidden; width: 260px; margin-top: 3px;"><p><span class="imported-info-area" style="color: rgb(33, 33, 33); font-family: Roboto, Noto, sans-serif; font-size: 14px;"></span></p><pre class="brush:python;toolbar:false" style="padding: 15px 20px; border-radius: 3px; background-color: rgb(241, 241, 241); font-family: Menlo, &quot;Bitstream Vera Sans Mono&quot;, &quot;DejaVu Sans Mono&quot;, Monaco, Consolas, monospace; font-size: 12px; line-height: 1.5;">#&nbsp;新增標註&nbsp;Age&nbsp;欄位是否為缺漏值的欄位(有缺漏標為0)
df_data['isAge']&nbsp;=&nbsp;df_data['Age'].isnull().map(&nbsp;lambda&nbsp;x:0&nbsp;if&nbsp;x==True&nbsp;else&nbsp;1&nbsp;)</pre><pre class="brush:python;toolbar:false" style="padding: 15px 20px; border-radius: 3px; background-color: rgb(241, 241, 241); font-family: Menlo, &quot;Bitstream Vera Sans Mono&quot;, &quot;DejaVu Sans Mono&quot;, Monaco, Consolas, monospace; font-size: 12px; line-height: 1.5;">#&nbsp;分別觀察&nbsp;Age&nbsp;與&nbsp;Sex、Pclass&nbsp;的缺漏值分布狀況
display(&nbsp;pd.crosstab(&nbsp;df_data.isAge,&nbsp;df_data.Sex,&nbsp;margins=True&nbsp;)&nbsp;)
display(&nbsp;pd.crosstab(&nbsp;df_data.isAge,&nbsp;df_data.Pclass,&nbsp;margins=True&nbsp;)&nbsp;)</pre><pre class="brush:python;toolbar:false" style="padding: 15px 20px; border-radius: 3px; background-color: rgb(241, 241, 241); font-family: Menlo, &quot;Bitstream Vera Sans Mono&quot;, &quot;DejaVu Sans Mono&quot;, Monaco, Consolas, monospace; font-size: 12px; line-height: 1.5;">fig,&nbsp;axs&nbsp;=&nbsp;plt.subplots(1,2,figsize=(14,5))
#plt.suptitle('Age')

plt.subplot(1,2,1)
sns.countplot(&nbsp;df_data.Sex,&nbsp;hue=df_data.isAge,&nbsp;palette=['lightcoral','skyblue']&nbsp;)
plt.ylabel(&nbsp;'Counts'&nbsp;)&nbsp;

plt.subplot(1,2,2)
sns.countplot(&nbsp;df_data.Pclass,&nbsp;hue=df_data.isAge,&nbsp;palette=['lightcoral','skyblue']&nbsp;)
plt.ylabel(&nbsp;''&nbsp;)&nbsp;

plt.show()</pre><p style="white-space: normal; text-align: center;"><img src="https://raw.githubusercontent.com/chenkenanalytic/img/master/da-titanic/3.png" style="font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-size: 36px; width: 100%"></p><p><span style="font-size: 18px; color: rgb(33, 37, 41); font-family: 微軟正黑體; text-align: justify; background-color: rgb(255, 255, 255);">經觀察上表及圖後可知，Age 欄位的缺漏值明顯分佈在 Pclass 3 中，約佔 29.34%(=208/709)，進一步觀察在 Pclass 1 及 Pclass 2 的乘客中，Age 欄位對於存活率是否有明顯的影響？</span></p><pre class="brush:python;toolbar:false" style="padding: 15px 20px; border-radius: 3px; background-color: rgb(241, 241, 241); font-family: Menlo, &quot;Bitstream Vera Sans Mono&quot;, &quot;DejaVu Sans Mono&quot;, Monaco, Consolas, monospace; font-size: 12px; line-height: 1.5;">index_S&nbsp;=&nbsp;(df_data.isAge==1)&amp;(df_data.Pclass!=3)&amp;(df_data.Survived==1)
index_D&nbsp;=&nbsp;(df_data.isAge==1)&amp;(df_data.Pclass!=3)&amp;(df_data.Survived==0)

plt.figure(&nbsp;figsize=(14,5)&nbsp;)
sns.distplot(&nbsp;df_data.loc[index_S,'Age'],&nbsp;bins=20,&nbsp;color='blue',&nbsp;label='Survived'&nbsp;)
sns.distplot(&nbsp;df_data.loc[index_D,'Age'],&nbsp;bins=20,&nbsp;color='red',&nbsp;label='Dead'&nbsp;)
plt.title(&nbsp;'Pclass&nbsp;=&nbsp;1&nbsp;or&nbsp;2'&nbsp;)
plt.legend(&nbsp;)
plt.show(&nbsp;)</pre><p style="white-space: normal; text-align: center;"><img src="https://raw.githubusercontent.com/chenkenanalytic/img/master/da-titanic/4.png" style="font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-size: 36px; width: 100%"></p><p><span style="font-size: 18px; color: rgb(33, 37, 41); font-family: 微軟正黑體; text-align: justify; background-color: rgb(255, 255, 255);">從上圖可觀察到，在 Pclass 1 及 Pclass 2 的乘客中，年齡約小於 17 歲的乘客中有明顯較高的生存率，若年齡超過 17 歲則生存率並無明顯的差別，所以我們可大膽假設 Age 欄位與生存率具有關聯性，另外，因為年齡與稱謂(Title)也有相當程度的關聯，因此，我們將先計算每個稱謂的年齡平均值，再用此平均值來填補每個 Title 中所對應 Age 欄位的缺漏值。</span></p><p><span style="color: rgb(33, 33, 33); font-family: Roboto, Noto, sans-serif; background-color: rgb(255, 255, 255);"></span></p><pre class="brush:python;toolbar:false" style="padding: 15px 20px; border-radius: 3px; background-color: rgb(241, 241, 241); font-family: Menlo, &quot;Bitstream Vera Sans Mono&quot;, &quot;DejaVu Sans Mono&quot;, Monaco, Consolas, monospace; font-size: 12px; line-height: 1.5;">#&nbsp;計算每個&nbsp;Title&nbsp;的年齡平均值及中位數
Age_Mean&nbsp;=&nbsp;df_data[['Title','Age']].groupby(&nbsp;by=['Title']&nbsp;).mean()
Age_Median&nbsp;=&nbsp;df_data[['Title','Age']].groupby(&nbsp;by=['Title']&nbsp;).median()

Age_Mean.columns&nbsp;=&nbsp;['Age&nbsp;Mean']
Age_Median.columns&nbsp;=&nbsp;['Age&nbsp;Median']
Age_Mean.reset_index(&nbsp;inplace=True&nbsp;)
Age_Median.reset_index(&nbsp;inplace=True&nbsp;)

display(&nbsp;Age_Median&nbsp;)
display(&nbsp;Age_Mean&nbsp;)</pre><p><span style="color: rgb(33, 33, 33); font-family: Roboto, Noto, sans-serif; background-color: rgb(255, 255, 255);"></span></p><pre class="brush:python;toolbar:false" style="padding: 15px 20px; border-radius: 3px; background-color: rgb(241, 241, 241); font-family: Menlo, &quot;Bitstream Vera Sans Mono&quot;, &quot;DejaVu Sans Mono&quot;, Monaco, Consolas, monospace; font-size: 12px; line-height: 1.5;">#&nbsp;利用每個&nbsp;Title&nbsp;的年齡平均數，填補每個&nbsp;Title&nbsp;所對應&nbsp;Age&nbsp;的缺漏值
df_data.loc[(df_data.Age.isnull())&amp;(df_data.Title=='Master'),'Age']&nbsp;=&nbsp;Age_Mean.loc[Age_Mean.Title=='Master','Age&nbsp;Mean'][0]
df_data.loc[(df_data.Age.isnull())&amp;(df_data.Title=='Miss'),'Age']&nbsp;=&nbsp;Age_Mean.loc[Age_Mean.Title=='Miss','Age&nbsp;Mean'][1]
df_data.loc[(df_data.Age.isnull())&amp;(df_data.Title=='Mr'),'Age']&nbsp;=&nbsp;Age_Mean.loc[Age_Mean.Title=='Mr','Age&nbsp;Mean'][2]
df_data.loc[(df_data.Age.isnull())&amp;(df_data.Title=='Mrs'),'Age']&nbsp;=&nbsp;Age_Mean.loc[Age_Mean.Title=='Mrs','Age&nbsp;Mean'][3]
df_data.loc[(df_data.Age.isnull())&amp;(df_data.Title=='Rare'),'Age']&nbsp;=&nbsp;Age_Mean.loc[Age_Mean.Title=='Rare','Age&nbsp;Mean'][4]

#&nbsp;刪除&nbsp;isAge&nbsp;欄位&nbsp;
df_data.drop(&nbsp;'isAge',&nbsp;axis=1,&nbsp;inplace=True&nbsp;)</pre><p><br></p><p><span style="font-size: 18px; color: rgb(33, 37, 41); font-family: 微軟正黑體; text-align: justify; background-color: rgb(255, 255, 255);">填滿 Age 欄位的缺漏值後，我們將年齡特徵再區分成未滿17歲及17歲以上，未滿17歲的乘客標為1，17歲以上的乘客標為0。</span></p><p><span style="color: rgb(33, 33, 33); font-family: Roboto, Noto, sans-serif; background-color: rgb(255, 255, 255);"></span></p><pre class="brush:python;toolbar:false" style="padding: 15px 20px; border-radius: 3px; background-color: rgb(241, 241, 241); font-family: Menlo, &quot;Bitstream Vera Sans Mono&quot;, &quot;DejaVu Sans Mono&quot;, Monaco, Consolas, monospace; font-size: 12px; line-height: 1.5;">#&nbsp;乘客年齡是否未滿17歲(是：1；否：0)
df_data[&nbsp;'is_Age_17'&nbsp;]&nbsp;=&nbsp;(df_data.Age&lt;17)*1
df_data</pre><p><span style="color: rgb(33, 33, 33); font-family: Roboto, Noto, sans-serif; background-color: rgb(255, 255, 255);"></span><br></p><h4 class="text-cell-section-header" style="color: rgb(33, 33, 33); font-family: Roboto, Noto, sans-serif; font-weight: 400; margin-bottom: 0.5em; position: relative; margin-top: 0.5em; font-size: 18px; white-space: normal; background-color: rgb(255, 255, 255);"><strong><span style="font-size: 18px; color: rgb(33, 37, 41); font-family: 微軟正黑體; text-align: justify; background-color: rgb(255, 255, 255);">船艙號碼(Cabin) :</span></strong></h4><p style="color: rgb(33, 33, 33); margin-bottom: 6px; margin-top: 0.5em; font-family: Roboto, Noto, sans-serif; white-space: normal; background-color: rgb(255, 255, 255);"><span style="font-size: 18px; color: rgb(33, 37, 41); font-family: 微軟正黑體; text-align: justify; background-color: rgb(255, 255, 255);">因爲整體 Cabin 欄位約有 77% 的缺漏值，我們在觀察 Cabin 欄位中的資料類別後，僅取出頭一個英文字母作為分類的標籤，其他缺漏的欄位以 NoCabin 表示。</span></p><pre class="brush:python;toolbar:false" style="padding: 15px 20px; border-radius: 3px; background-color: rgb(241, 241, 241); font-family: Menlo, &quot;Bitstream Vera Sans Mono&quot;, &quot;DejaVu Sans Mono&quot;, Monaco, Consolas, monospace; font-size: 12px; line-height: 1.5;">#&nbsp;觀察&nbsp;Cabin&nbsp;中的種類
df_data['Cabin'].unique()</pre><pre class="brush:python;toolbar:false" style="padding: 15px 20px; border-radius: 3px; background-color: rgb(241, 241, 241); font-family: Menlo, &quot;Bitstream Vera Sans Mono&quot;, &quot;DejaVu Sans Mono&quot;, Monaco, Consolas, monospace; font-size: 12px; line-height: 1.5;">#&nbsp;取出&nbsp;Cabin&nbsp;中的第一個字母，如果為缺漏值，則以&nbsp;NoCabin&nbsp;表示
df_data['Cabin']&nbsp;=&nbsp;df_data['Cabin'].apply(&nbsp;lambda&nbsp;x:str(x)[0]&nbsp;if&nbsp;not&nbsp;pd.isnull(x)&nbsp;else&nbsp;'NoCabin'&nbsp;)
df_data['Cabin'].unique()</pre><p><br></p><p><span style="font-size: 18px; color: rgb(33, 37, 41); font-family: 微軟正黑體; text-align: justify; background-color: rgb(255, 255, 255);">最後，在完成上述缺漏值的填補後，我們再次檢查是否還有缺漏值尚未填補到。</span></p><p><span style="color: rgb(33, 33, 33); font-family: Roboto, Noto, sans-serif; background-color: rgb(255, 255, 255);"></span></p><pre class="brush:python;toolbar:false" style="padding: 15px 20px; border-radius: 3px; background-color: rgb(241, 241, 241); font-family: Menlo, &quot;Bitstream Vera Sans Mono&quot;, &quot;DejaVu Sans Mono&quot;, Monaco, Consolas, monospace; font-size: 12px; line-height: 1.5;">Missing_Counts(&nbsp;df_data.drop('Survived',&nbsp;axis=1)&nbsp;)</pre><h3 class="text-cell-section-header" style="color: rgb(33, 33, 33); font-family: Roboto, Noto, sans-serif; font-weight: 400; margin-bottom: 0.5em; position: relative; margin-top: 0.5em; font-size: 20px; white-space: normal; background-color: rgb(255, 255, 255);"><br></h3><h3 class="text-cell-section-header" style="color: rgb(33, 33, 33); font-family: Roboto, Noto, sans-serif; font-weight: 400; margin-bottom: 0.5em; position: relative; margin-top: 0.5em; font-size: 20px; white-space: normal; background-color: rgb(255, 255, 255);"><span style="font-size: 20px;"><strong><span style="color: rgb(33, 37, 41); font-family: 微軟正黑體; text-align: justify; background-color: rgb(255, 255, 255);">(3) 離群值(Outlier)</span></strong></span></h3><p style="color: rgb(33, 33, 33); margin-bottom: 6px; margin-top: 0.5em; font-family: Roboto, Noto, sans-serif; white-space: normal; background-color: rgb(255, 255, 255);"><span style="font-size: 18px; color: rgb(33, 37, 41); font-family: 微軟正黑體; text-align: justify; background-color: rgb(255, 255, 255);">因為離群值會明顯影響非樹狀模型的預測結果，例如：線性迴歸(Linear Regression)模型，因此，針對連續型的數值欄位，我們還需再檢視其資料的分布情況，透過觀察直方圖(Histogram)或盒鬚圖(Box Plot)，可用來判斷欄位是否有離群值。</span></p><p style="color: rgb(33, 33, 33); margin-bottom: 6px; margin-top: 0.5em; font-family: Roboto, Noto, sans-serif; white-space: normal; background-color: rgb(255, 255, 255);"><span style="font-size: 18px; color: rgb(33, 37, 41); font-family: 微軟正黑體; text-align: justify; background-color: rgb(255, 255, 255);">Reference :&nbsp;&nbsp;</span><a href="https://towardsdatascience.com/understanding-boxplots-5e2df7bcbd51" target="_blank" rel="nofollow" style="text-decoration: underline; font-size: 18px; font-family: 微軟正黑體; text-align: justify; background-color: rgb(255, 255, 255); color: rgb(0, 112, 192);"><span style="font-size: 18px; font-family: 微軟正黑體; text-align: justify; background-color: rgb(255, 255, 255); color: rgb(0, 112, 192);">Understanding Boxplots</span></a></p><p><span style="color: rgb(33, 33, 33); font-family: Roboto, Noto, sans-serif; background-color: rgb(255, 255, 255);"></span><br></p><h4 class="text-cell-section-header" style="color: rgb(33, 33, 33); font-family: Roboto, Noto, sans-serif; font-weight: 400; margin-bottom: 0.5em; position: relative; margin-top: 0.5em; font-size: 18px; white-space: normal; background-color: rgb(255, 255, 255);"><strong><span style="font-size: 18px; color: rgb(33, 37, 41); font-family: 微軟正黑體; text-align: justify; background-color: rgb(255, 255, 255);">乘客票價(Fare) :</span></strong></h4><p style="color: rgb(33, 33, 33); margin-bottom: 6px; margin-top: 0.5em; font-family: Roboto, Noto, sans-serif; white-space: normal; background-color: rgb(255, 255, 255);"><span style="font-size: 18px; color: rgb(33, 37, 41); font-family: 微軟正黑體; text-align: justify; background-color: rgb(255, 255, 255);">首先，我們先觀察 Fare 欄位的直方圖(Histogram)及盒鬚圖(Box Plot)資料分布狀況：</span></p><pre class="brush:python;toolbar:false" style="padding: 15px 20px; border-radius: 3px; background-color: rgb(241, 241, 241); font-family: Menlo, &quot;Bitstream Vera Sans Mono&quot;, &quot;DejaVu Sans Mono&quot;, Monaco, Consolas, monospace; font-size: 12px; line-height: 1.5;">#&nbsp;對&nbsp;Fare&nbsp;欄位取對數
df_data['LogFare']&nbsp;=&nbsp;np.log1p(&nbsp;df_data.Fare&nbsp;)

#&nbsp;直方圖(Histogram)
fig,&nbsp;axs&nbsp;=&nbsp;plt.subplots(&nbsp;1,2,figsize=(12,5)&nbsp;)

plt.subplot(&nbsp;1,2,1&nbsp;)
sns.distplot(&nbsp;df_data.Fare,&nbsp;kde=True,&nbsp;bins=45,&nbsp;color='skyblue',&nbsp;label='bins&nbsp;=&nbsp;45'&nbsp;)
plt.xlabel(&nbsp;'Fare'&nbsp;)&nbsp;
plt.ylabel(&nbsp;'Counts'&nbsp;)&nbsp;
plt.legend(&nbsp;)

plt.subplot(&nbsp;1,2,2&nbsp;)
sns.distplot(&nbsp;df_data.LogFare,&nbsp;kde=True,&nbsp;bins=45,&nbsp;color='skyblue',&nbsp;label='bins&nbsp;=&nbsp;45'&nbsp;)
plt.xlabel(&nbsp;'Log&nbsp;Fare'&nbsp;)&nbsp;
plt.ylabel(&nbsp;''&nbsp;)&nbsp;
plt.legend(&nbsp;)

plt.show()</pre><p style="white-space: normal; text-align: center;"><img src="https://raw.githubusercontent.com/chenkenanalytic/img/master/da-titanic/5.png" style="font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-size: 36px; width: 100%"></p><pre class="brush:python;toolbar:false" style="padding: 15px 20px; border-radius: 3px; background-color: rgb(241, 241, 241); font-family: Menlo, &quot;Bitstream Vera Sans Mono&quot;, &quot;DejaVu Sans Mono&quot;, Monaco, Consolas, monospace; font-size: 12px; line-height: 1.5;">#&nbsp;盒鬚圖(Box&nbsp;Plot)
fig,&nbsp;axs&nbsp;=&nbsp;plt.subplots(&nbsp;1,2,figsize=(12,5)&nbsp;)

plt.subplot(&nbsp;1,2,1&nbsp;)
sns.boxplot(&nbsp;df_data.Fare,&nbsp;orient='h',&nbsp;color='skyblue'&nbsp;)
plt.xlabel(&nbsp;'Fare'&nbsp;)&nbsp;

plt.subplot(&nbsp;1,2,2&nbsp;)
sns.boxplot(&nbsp;df_data.LogFare,&nbsp;orient='h',&nbsp;color='skyblue'&nbsp;)
plt.xlabel(&nbsp;'Log&nbsp;Fare'&nbsp;)&nbsp;

plt.show()</pre><p style="white-space: normal; text-align: center;"><img src="https://raw.githubusercontent.com/chenkenanalytic/img/master/da-titanic/6.png" style="font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-size: 36px; "></p><p><span style="font-size: 18px; color: rgb(33, 37, 41); font-family: 微軟正黑體; text-align: justify; background-color: rgb(255, 255, 255);">從上面直方圖及盒鬚圖可知，初步判斷 Fare 欄位可能存有離群值( i.e., 大於 Q3+1.5</span><nobr style="transition: none 0s ease 0s; border: 0px; padding: 0px; margin: 0px; max-width: none; max-height: none; min-width: 0px; min-height: 0px; vertical-align: 0px; line-height: normal;"><span style="font-size: 18px; color: rgb(33, 37, 41); font-family: 微軟正黑體; text-align: justify; background-color: rgb(255, 255, 255);">×</span></nobr><span style="font-size: 18px; color: rgb(33, 37, 41); font-family: 微軟正黑體; text-align: justify; background-color: rgb(255, 255, 255);">IQR )。計算 Fare 欄位的四分位數(Quartile)，且以四分位數對 Fare 欄位進行分組，觀察生存率是否會因票價組別的高低有所差異？藉此判斷票價大於 Q3+1.5</span><nobr style="transition: none 0s ease 0s; border: 0px; padding: 0px; margin: 0px; max-width: none; max-height: none; min-width: 0px; min-height: 0px; vertical-align: 0px; line-height: normal;"><span style="font-size: 18px; color: rgb(33, 37, 41); font-family: 微軟正黑體; text-align: justify; background-color: rgb(255, 255, 255);">×</span></nobr><span style="font-size: 18px; color: rgb(33, 37, 41); font-family: 微軟正黑體; text-align: justify; background-color: rgb(255, 255, 255);">IQR 是否可視為離群值。</span></p><pre class="brush:python;toolbar:false" style="padding: 15px 20px; border-radius: 3px; background-color: rgb(241, 241, 241); font-family: Menlo, &quot;Bitstream Vera Sans Mono&quot;, &quot;DejaVu Sans Mono&quot;, Monaco, Consolas, monospace; font-size: 12px; line-height: 1.5;">#&nbsp;計算&nbsp;Fare&nbsp;欄位各個百分位數(Percentile)
P_all&nbsp;=&nbsp;[&nbsp;np.percentile(&nbsp;df_data.Fare,&nbsp;q=i&nbsp;)&nbsp;for&nbsp;i&nbsp;in&nbsp;np.arange(0,101)&nbsp;]&nbsp;
Pth_Percentile&nbsp;=&nbsp;pd.DataFrame(&nbsp;{&nbsp;'Q':list(range(101)),&nbsp;'Value':P_all&nbsp;}&nbsp;)

#&nbsp;The&nbsp;first、second&nbsp;and&nbsp;third&nbsp;quartile(i,e.,&nbsp;the&nbsp;25th、50th&nbsp;and&nbsp;75th&nbsp;Percentile)
Q1&nbsp;=&nbsp;Pth_Percentile.iloc[&nbsp;25,&nbsp;1&nbsp;]
Q2&nbsp;=&nbsp;Pth_Percentile.iloc[&nbsp;50,&nbsp;1&nbsp;]
Q3&nbsp;=&nbsp;Pth_Percentile.iloc[&nbsp;75,&nbsp;1&nbsp;]
IQR&nbsp;=&nbsp;Q3&nbsp;-&nbsp;Q1

print(&nbsp;f'Q1&nbsp;=&nbsp;{Q1}'&nbsp;)
print(&nbsp;f'Q2&nbsp;=&nbsp;{Q2}&nbsp;=&nbsp;Median'&nbsp;)
print(&nbsp;f'Q3&nbsp;=&nbsp;{Q3}'&nbsp;)
print(&nbsp;f'Maximum&nbsp;=&nbsp;{df_data.Fare.max()}')
print(&nbsp;f'IQR&nbsp;=&nbsp;Q3&nbsp;-&nbsp;Q1&nbsp;=&nbsp;{IQR}'&nbsp;)
print(&nbsp;f'Q3&nbsp;+&nbsp;1.5IQR&nbsp;=&nbsp;{Q3+1.5*IQR}'&nbsp;)

#&nbsp;依照四分位數，對&nbsp;Fare&nbsp;欄位進行分組
Fare_bin&nbsp;=&nbsp;[&nbsp;0,&nbsp;Q1,&nbsp;Q2,&nbsp;Q3,&nbsp;Q3+1.5*IQR,&nbsp;df_data.Fare.max()&nbsp;]
df_data[&nbsp;'Fare_Group'&nbsp;]&nbsp;=&nbsp;pd.cut(&nbsp;df_data.Fare.values,&nbsp;Fare_bin&nbsp;)

#&nbsp;計算每個分組中的資料筆數
Group_Counts&nbsp;=&nbsp;df_data[&nbsp;'Fare_Group'&nbsp;].value_counts().reset_index()&nbsp;&nbsp;&nbsp;&nbsp;
Group_Counts.columns&nbsp;=&nbsp;[&nbsp;'Fare_Group',&nbsp;'Counts'&nbsp;]
Group_Counts.sort_values(&nbsp;by='Fare_Group'&nbsp;)</pre><p><br></p><p><span style="font-size: 18px; color: rgb(33, 37, 41); font-family: 微軟正黑體; text-align: justify; background-color: rgb(255, 255, 255);">再次藉由長條圖及盒鬚圖，觀察不同的票價組別，彼此間生存率的差異性。</span></p><p><span style="color: rgb(33, 33, 33); font-family: Roboto, Noto, sans-serif; background-color: rgb(255, 255, 255);"></span></p><pre class="brush:python;toolbar:false" style="padding: 15px 20px; border-radius: 3px; background-color: rgb(241, 241, 241); font-family: Menlo, &quot;Bitstream Vera Sans Mono&quot;, &quot;DejaVu Sans Mono&quot;, Monaco, Consolas, monospace; font-size: 12px; line-height: 1.5;">plt.subplots(&nbsp;figsize=(12,5)&nbsp;)
sns.countplot(&nbsp;df_data.Fare_Group,&nbsp;hue=df_data.Survived,&nbsp;palette=['lightcoral','skyblue']&nbsp;)
plt.ylabel(&nbsp;'Counts'&nbsp;)&nbsp;
plt.xticks(&nbsp;rotation=-45,&nbsp;fontsize=12&nbsp;)
plt.show()</pre><p style="white-space: normal; text-align: center;"><img src="https://raw.githubusercontent.com/chenkenanalytic/img/master/da-titanic/7.png" style="font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-size: 36px; width:100%"></p><p><span style="color: rgb(33, 33, 33); font-family: Roboto, Noto, sans-serif; background-color: rgb(255, 255, 255);"></span></p><pre class="brush:python;toolbar:false" style="padding: 15px 20px; border-radius: 3px; background-color: rgb(241, 241, 241); font-family: Menlo, &quot;Bitstream Vera Sans Mono&quot;, &quot;DejaVu Sans Mono&quot;, Monaco, Consolas, monospace; font-size: 12px; line-height: 1.5;">plt.subplots(&nbsp;figsize=(15,12)&nbsp;)
sns.boxplot(&nbsp;x='LogFare',&nbsp;y='Fare_Group',&nbsp;data=df_data,&nbsp;hue='Survived',&nbsp;orient='h',&nbsp;color='skyblue'&nbsp;)
plt.yticks(&nbsp;rotation=-30,&nbsp;fontsize=15&nbsp;)
plt.show()</pre><p style="white-space: normal; text-align: center;"><img src="https://raw.githubusercontent.com/chenkenanalytic/img/master/da-titanic/8.png" style="font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-size: 36px; width:100%"></p><p><span style="font-size: 18px; color: rgb(33, 37, 41); font-family: 微軟正黑體; text-align: justify; background-color: rgb(255, 255, 255);">從上圖可明顯觀察出，票價組別越高生存率相對越大，且每一票價組別中，生還者的票價中位數皆高於罹難者的票價中位數；所以，我們可大膽推測 Fare 與生存率有相關性，Fare 越高生存機率越大，且對 Fare 欄位僅做對數轉換並不做離群值的處理。</span></p><p><span style="color: rgb(33, 33, 33); font-family: Roboto, Noto, sans-serif; background-color: rgb(255, 255, 255);"></span></p><pre class="brush:python;toolbar:false" style="padding: 15px 20px; border-radius: 3px; background-color: rgb(241, 241, 241); font-family: Menlo, &quot;Bitstream Vera Sans Mono&quot;, &quot;DejaVu Sans Mono&quot;, Monaco, Consolas, monospace; font-size: 12px; line-height: 1.5;">#&nbsp;刪除&nbsp;Fare_Group&nbsp;欄位&nbsp;
df_data.drop(&nbsp;['Fare','Fare_Group'],&nbsp;axis=1,&nbsp;inplace=True&nbsp;)</pre><p><span style="color: rgb(33, 33, 33); font-family: Roboto, Noto, sans-serif; background-color: rgb(255, 255, 255);"></span><br></p><h3 class="text-cell-section-header" style="color: rgb(33, 33, 33); font-family: Roboto, Noto, sans-serif; font-weight: 400; margin-bottom: 0.5em; position: relative; margin-top: 0.5em; font-size: 20px; white-space: normal; background-color: rgb(255, 255, 255);"><span style="font-size: 20px;"><strong><span style="font-size: 20px; color: rgb(33, 37, 41); font-family: 微軟正黑體; text-align: justify; background-color: rgb(255, 255, 255);">(4) 獨熱編碼(OneHot Encoding)、標籤編碼(Label Encoding)</span></strong></span></h3><p style="color: rgb(33, 33, 33); margin-bottom: 6px; margin-top: 0.5em; font-family: Roboto, Noto, sans-serif; white-space: normal; background-color: rgb(255, 255, 255);"><span style="font-size: 18px; color: rgb(33, 37, 41); font-family: 微軟正黑體; text-align: justify; background-color: rgb(255, 255, 255);">對於定性且無序的特徵欄位，例如：性別、顏色、國家別等，我們可利用 get_dummies( ) 函數執行獨熱編碼，將其轉換成定量資料，這裏我們對 Embarked 欄位做獨熱編碼；另外，因為女性的生存率明顯高於男性，故我們對 Sex 欄位做標籤編碼。</span></p><p><br></p><h4 class="text-cell-section-header" style="color: rgb(33, 33, 33); font-family: Roboto, Noto, sans-serif; font-weight: 400; margin-bottom: 0.5em; position: relative; margin-top: 0.5em; font-size: 18px; white-space: normal; background-color: rgb(255, 255, 255);"><strong><span style="font-size: 18px; color: rgb(33, 37, 41); font-family: 微軟正黑體; text-align: justify; background-color: rgb(255, 255, 255);">登船港口(Embarked) :</span></strong></h4><pre class="brush:python;toolbar:false" style="padding: 15px 20px; border-radius: 3px; background-color: rgb(241, 241, 241); font-family: Menlo, &quot;Bitstream Vera Sans Mono&quot;, &quot;DejaVu Sans Mono&quot;, Monaco, Consolas, monospace; font-size: 12px; line-height: 1.5;">#&nbsp;OneHot&nbsp;Encoding
OneHot_Embarked&nbsp;=&nbsp;pd.get_dummies(&nbsp;df_data.Embarked,&nbsp;prefix='Embarked'&nbsp;)

#&nbsp;合併&nbsp;Embarked&nbsp;編碼後的欄位
df_data&nbsp;=&nbsp;pd.concat(&nbsp;[&nbsp;df_data,&nbsp;OneHot_Embarked&nbsp;],&nbsp;axis=1&nbsp;)
df_data.drop(&nbsp;'Embarked',&nbsp;axis=1,&nbsp;inplace=True&nbsp;)</pre><p><br></p><h4 class="text-cell-section-header" style="color: rgb(33, 33, 33); font-family: Roboto, Noto, sans-serif; font-weight: 400; margin-bottom: 0.5em; position: relative; margin-top: 0.5em; font-size: 18px; white-space: normal; background-color: rgb(255, 255, 255);"><strong><span style="font-size: 18px; color: rgb(33, 37, 41); font-family: 微軟正黑體; text-align: justify; background-color: rgb(255, 255, 255);">性別(Sex) :</span></strong></h4><pre class="brush:python;toolbar:false" style="padding: 15px 20px; border-radius: 3px; background-color: rgb(241, 241, 241); font-family: Menlo, &quot;Bitstream Vera Sans Mono&quot;, &quot;DejaVu Sans Mono&quot;, Monaco, Consolas, monospace; font-size: 12px; line-height: 1.5;">#&nbsp;Label&nbsp;Encoding
Sex_mapping&nbsp;=&nbsp;{&nbsp;'male':0,&nbsp;'female':1&nbsp;}
df_data[&nbsp;'Sex'&nbsp;]&nbsp;=&nbsp;df_data.Sex.map(&nbsp;Sex_mapping&nbsp;)</pre><p><br></p><h2 class="text-cell-section-header" style="color: rgb(33, 33, 33); font-family: Roboto, Noto, sans-serif; font-weight: 400; margin-bottom: 0.5em; position: relative; margin-top: 0.5em; font-size: 23px; white-space: normal; background-color: rgb(255, 255, 255);"><span style="font-size: 24px;"><strong><span style="color: rgb(33, 37, 41); font-family: 微軟正黑體; text-align: justify; background-color: rgb(255, 255, 255);">訓練集(Train)與測試集(Test)</span></strong></span></h2><p style="color: rgb(33, 33, 33); margin-bottom: 6px; margin-top: 0.5em; font-family: Roboto, Noto, sans-serif; white-space: normal; background-color: rgb(255, 255, 255);"><span style="font-size: 18px; color: rgb(33, 37, 41); font-family: 微軟正黑體; text-align: justify; background-color: rgb(255, 255, 255);">在完成前述的資料分析及特徵工程後，我們就快可以把資料餵入模型進行訓練了！在此之前的最後一個注意步驟，就是需確認每個欄位皆為數值型態，且將資料分割回訓練集(train)與測試集(test)。所以，此時我們先檢視特徵工程後的資料，觀察是否還有需要處理的欄位：</span></p><pre class="brush:python;toolbar:false" style="padding: 15px 20px; border-radius: 3px; background-color: rgb(241, 241, 241); font-family: Menlo, &quot;Bitstream Vera Sans Mono&quot;, &quot;DejaVu Sans Mono&quot;, Monaco, Consolas, monospace; font-size: 12px; line-height: 1.5;">#&nbsp;檢視特徵工程後的資料
print(&nbsp;f'Shape&nbsp;of&nbsp;data&nbsp;after&nbsp;feature&nbsp;engineering&nbsp;=&nbsp;{df_data.shape}'&nbsp;)
df_data.head()</pre><p><br></p><h3 class="text-cell-section-header" style="color: rgb(33, 33, 33); font-family: Roboto, Noto, sans-serif; font-weight: 400; margin-bottom: 0.5em; position: relative; margin-top: 0.5em; font-size: 20px; white-space: normal; background-color: rgb(255, 255, 255);"><span style="font-size: 20px;"><strong><span style="color: rgb(33, 37, 41); font-family: 微軟正黑體; text-align: justify; background-color: rgb(255, 255, 255);">(1) 類別型態欄位轉為整數</span></strong></span></h3><p style="color: rgb(33, 33, 33); margin-bottom: 6px; margin-top: 0.5em; font-family: Roboto, Noto, sans-serif; white-space: normal; background-color: rgb(255, 255, 255);"><span style="font-size: 18px; color: rgb(33, 37, 41); font-family: 微軟正黑體; text-align: justify; background-color: rgb(255, 255, 255);">檢視後發現，因為我們之前有處理過字串欄位，所以資料中還存有 4 欄類別型態的欄位：Cabin、Embarked、Title、Ticket_info，因此，我們也需要將它們轉換成數值型態欄位：</span></p><pre class="brush:python;toolbar:false" style="padding: 15px 20px; border-radius: 3px; background-color: rgb(241, 241, 241); font-family: Menlo, &quot;Bitstream Vera Sans Mono&quot;, &quot;DejaVu Sans Mono&quot;, Monaco, Consolas, monospace; font-size: 12px; line-height: 1.5;">for&nbsp;col&nbsp;in&nbsp;['Title','Ticket_info','Cabin']:
&nbsp;&nbsp;&nbsp;&nbsp;df_data[col]&nbsp;=&nbsp;df_data[col].astype('category').cat.codes

df_data.head()</pre><p><br></p><h3 class="text-cell-section-header" style="color: rgb(33, 33, 33); font-family: Roboto, Noto, sans-serif; font-weight: 400; margin-bottom: 0.5em; position: relative; margin-top: 0.5em; font-size: 20px; white-space: normal; background-color: rgb(255, 255, 255);"><span style="font-size: 20px;"><strong><span style="font-size: 20px; color: rgb(33, 37, 41); font-family: 微軟正黑體; text-align: justify; background-color: rgb(255, 255, 255);">(2) 產生訓練集(Train)與測試集(Test)</span></strong></span></h3><p style="color: rgb(33, 33, 33); margin-bottom: 6px; margin-top: 0.5em; font-family: Roboto, Noto, sans-serif; white-space: normal; background-color: rgb(255, 255, 255);"><span style="font-size: 18px; color: rgb(33, 37, 41); font-family: 微軟正黑體; text-align: justify; background-color: rgb(255, 255, 255);">最後，我們將整體資料分割回訓練集與測試集兩部份，訓練集用來餵入模型進行訓練，測試集則為模型最終要預測的結果，此外，在分割產出資料後，我們刪除與生存率無毫關聯性的欄位 PassengerId。</span></p><pre class="brush:python;toolbar:false" style="padding: 15px 20px; border-radius: 3px; background-color: rgb(241, 241, 241); font-family: Menlo, &quot;Bitstream Vera Sans Mono&quot;, &quot;DejaVu Sans Mono&quot;, Monaco, Consolas, monospace; font-size: 12px; line-height: 1.5;">#&nbsp;產生訓練集和測試集
Train&nbsp;=&nbsp;df_data[&nbsp;pd.notnull(df_data.Survived)&nbsp;]
Test&nbsp;=&nbsp;df_data[&nbsp;pd.isnull(df_data.Survived)&nbsp;]

#&nbsp;訓練集刪除&nbsp;PassengerId&nbsp;欄位；
#&nbsp;測試集刪除&nbsp;PassengerId&nbsp;與&nbsp;Survived&nbsp;欄位
Train.drop(&nbsp;['PassengerId'],&nbsp;axis=1,&nbsp;inplace=True&nbsp;)
Test.drop(&nbsp;['PassengerId','Survived'],&nbsp;axis=1,&nbsp;inplace=True&nbsp;)

#&nbsp;將測試集中的標籤欄位&nbsp;Survived&nbsp;單獨拆出
Y_Train&nbsp;=&nbsp;Train.Survived
X_Train&nbsp;=&nbsp;Train.drop(&nbsp;['Survived'],&nbsp;axis=1&nbsp;)

print(&nbsp;f'Shape&nbsp;of&nbsp;X_Train&nbsp;=&nbsp;{X_Train.shape}'&nbsp;)
print(&nbsp;f'Shape&nbsp;of&nbsp;Y_Train&nbsp;=&nbsp;{Y_Train.shape}'&nbsp;)
print(&nbsp;f'Shape&nbsp;of&nbsp;Test&nbsp;=&nbsp;{Test.shape}'&nbsp;)</pre><p><br></p><h2 class="text-cell-section-header" style="color: rgb(33, 33, 33); font-family: Roboto, Noto, sans-serif; font-weight: 400; margin-bottom: 0.5em; position: relative; margin-top: 0.5em; font-size: 23px; white-space: normal; background-color: rgb(255, 255, 255);"><span style="font-size: 24px;"><strong><span style="font-size: 24px; color: rgb(33, 37, 41); font-family: 微軟正黑體; text-align: justify; background-color: rgb(255, 255, 255);">特徵重要性(Feature Importance)</span></strong></span></h2><p style="color: rgb(33, 33, 33); margin-bottom: 6px; margin-top: 0.5em; font-family: Roboto, Noto, sans-serif; white-space: normal; background-color: rgb(255, 255, 255);"><span style="font-size: 18px; color: rgb(33, 37, 41); font-family: 微軟正黑體; text-align: justify; background-color: rgb(255, 255, 255);">我們使用最基本的樹狀模型 - 決策樹(Decision Tree)，來評估特徵欄位對於標籤欄位(Survived)的重要性，目的是幫助我們篩選較具關鍵性的特徵欄位，提升模型的預測能力。評估特徵重要性的方法並非僅侷限於決策樹，另外其他常見的手法有：相關係數(Correlation)、Lasso等。</span></p><pre class="brush:python;toolbar:false" style="padding: 15px 20px; border-radius: 3px; background-color: rgb(241, 241, 241); font-family: Menlo, &quot;Bitstream Vera Sans Mono&quot;, &quot;DejaVu Sans Mono&quot;, Monaco, Consolas, monospace; font-size: 12px; line-height: 1.5;">#&nbsp;建立決策樹模型
DTC&nbsp;=&nbsp;RandomForestClassifier(&nbsp;)
#&nbsp;自變數、應變數進行擬合
DTC.fit(&nbsp;X_Train,&nbsp;Y_Train&nbsp;)

#&nbsp;排序特徵重要性(由大到小)
col_names&nbsp;=&nbsp;X_Train.columns
importances&nbsp;=&nbsp;DTC.feature_importances_
Feature_Rank&nbsp;=&nbsp;pd.DataFrame(&nbsp;{&nbsp;'Feature_Name':col_names,&nbsp;'Importance':importances&nbsp;}&nbsp;)
Feature_Rank.sort_values(&nbsp;by='Importance',&nbsp;ascending=False,&nbsp;inplace=True&nbsp;)&nbsp;
Feature_Rank</pre><p><br></p><h2 class="text-cell-section-header" style="color: rgb(33, 33, 33); font-family: Roboto, Noto, sans-serif; font-weight: 400; margin-bottom: 0.5em; position: relative; margin-top: 0.5em; font-size: 23px; white-space: normal; background-color: rgb(255, 255, 255);"><span style="font-size: 24px;"><strong><span style="font-size: 24px; color: rgb(33, 37, 41); font-family: 微軟正黑體; text-align: justify; background-color: rgb(255, 255, 255);">建立模型</span></strong></span></h2><p style="color: rgb(33, 33, 33); margin-bottom: 6px; margin-top: 0.5em; font-family: Roboto, Noto, sans-serif; white-space: normal; background-color: rgb(255, 255, 255);"><span style="font-size: 18px; color: rgb(33, 37, 41); font-family: 微軟正黑體; text-align: justify; background-color: rgb(255, 255, 255);">在完成評估特徵重要性後，我們選擇使用隨機森林(Random Forest)來預測資料。由於在森林中每一棵樹的生成方法為拔靴法(Boostrap)，表示每一棵樹並不會用到所有的訓練集資料來生成，而未使用的樣本稱為袋外樣本(Out of Bag Sample)，其可用來評估預測的準確度，每一顆樹皆以這種方式生成，最後對所有樹的準確度取平均值，這便是隨機森林的特性。</span></p><p style="color: rgb(33, 33, 33); margin-bottom: 6px; margin-top: 0.5em; font-family: Roboto, Noto, sans-serif; white-space: normal; background-color: rgb(255, 255, 255);"><span style="font-size: 18px; color: rgb(33, 37, 41); font-family: 微軟正黑體; text-align: justify; background-color: rgb(255, 255, 255);">Reference:</span><a href="https://scikit-learn.org/stable/modules/generated/sklearn.ensemble.RandomForestClassifier.html" target="_blank" rel="nofollow" style="text-decoration: underline; font-size: 18px; font-family: 微軟正黑體; text-align: justify; background-color: rgb(255, 255, 255); color: rgb(0, 112, 192);"><span style="font-size: 18px; font-family: 微軟正黑體; text-align: justify; background-color: rgb(255, 255, 255); color: rgb(0, 112, 192);">RandomForestClassifier</span></a></p><pre class="brush:python;toolbar:false" style="padding: 15px 20px; border-radius: 3px; background-color: rgb(241, 241, 241); font-family: Menlo, &quot;Bitstream Vera Sans Mono&quot;, &quot;DejaVu Sans Mono&quot;, Monaco, Consolas, monospace; font-size: 12px; line-height: 1.5;">#&nbsp;隨機森林參數：
#&nbsp;n_estimators:&nbsp;樹的數量(default=10)。
#&nbsp;min_samples_leaf:&nbsp;最終葉節點最少樣本數(default=1)；
#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;當樣本不大時，可不設定使用預設，若樣本數量非常大時，則推薦增加此參數值。
#&nbsp;min_samples_split:節點再劃分時所需的最小樣本數(default=2)；
#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;當樣本不大時，可不設定使用預設，若樣本數量非常大時，則推薦增加此參數值。
#&nbsp;oob_score:&nbsp;是否採用袋外樣本(out-of-bag&nbsp;samples)來評估模型的準確度(default=False)。

RFC&nbsp;=&nbsp;RandomForestClassifier(&nbsp;n_estimators&nbsp;=&nbsp;1000,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;min_samples_split&nbsp;=&nbsp;20,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;min_samples_leaf&nbsp;=&nbsp;1,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;oob_score&nbsp;=&nbsp;True,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;random_state&nbsp;=&nbsp;1,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;n_jobs&nbsp;=&nbsp;-1&nbsp;)</pre><p><br></p><h2 class="text-cell-section-header" style="color: rgb(33, 33, 33); font-family: Roboto, Noto, sans-serif; font-weight: 400; margin-bottom: 0.5em; position: relative; margin-top: 0.5em; font-size: 23px; white-space: normal; background-color: rgb(255, 255, 255);"><span style="font-size: 24px;"><strong><span style="font-size: 24px; color: rgb(33, 37, 41); font-family: 微軟正黑體; text-align: justify; background-color: rgb(255, 255, 255);">訓練模型</span></strong></span></h2><p style="color: rgb(33, 33, 33); margin-bottom: 6px; margin-top: 0.5em; font-family: Roboto, Noto, sans-serif; white-space: normal; background-color: rgb(255, 255, 255);"><span style="font-size: 18px; color: rgb(33, 37, 41); font-family: 微軟正黑體; text-align: justify; background-color: rgb(255, 255, 255);">餵入訓練集資料(X_Train,Y_Train)訓練隨機森林(Random Forest)模型。一般而言，為了衡量模型的預測能力，在訓練模型之前，我們還會從訓練集中抽取出一小部份作為驗證集(Validation)，用來評估模型的準確度，而剩下沒被抽取到的資料則用來訓練模型，另外，為避免只參考某一特定的抽樣驗證結果，導致模型產生偏差，我們會藉由交叉驗證(Cross Validation)，來評估模型的準確度是否能達到我們要求的水準。<br>因為隨機森林可藉由前述所提的袋外樣本評估準確度，因此這裏我們便不需進行交叉驗證；然而，我們還想知道特徵欄位的多寡對於模型準確度的影響，所以，先把所有的欄位餵入模型進行訓練：</span></p><pre class="brush:python;toolbar:false" style="padding: 15px 20px; border-radius: 3px; background-color: rgb(241, 241, 241); font-family: Menlo, &quot;Bitstream Vera Sans Mono&quot;, &quot;DejaVu Sans Mono&quot;, Monaco, Consolas, monospace; font-size: 12px; line-height: 1.5;">#&nbsp;訓練模型
RFC.fit(&nbsp;X_Train,&nbsp;Y_Train&nbsp;)
print(&nbsp;'oob_score&nbsp;=&nbsp;{:.6f}'.format(RFC.oob_score_)&nbsp;)</pre><p><br></p><p><span style="font-size: 18px; color: rgb(33, 37, 41); font-family: 微軟正黑體; text-align: justify; background-color: rgb(255, 255, 255);">將所有的特徵欄位餵入模型進行訓練，訓練完成的模型準確率約 83.3%；接下來，我們試著參考上述特徵重要性的結果，只選擇部份特徵欄位來訓練模型，觀察這樣的模型準確度是否能有所提升？</span></p><p><span style="color: rgb(33, 33, 33); font-family: Roboto, Noto, sans-serif; background-color: rgb(255, 255, 255);"></span></p><pre class="brush:python;toolbar:false" style="padding: 15px 20px; border-radius: 3px; background-color: rgb(241, 241, 241); font-family: Menlo, &quot;Bitstream Vera Sans Mono&quot;, &quot;DejaVu Sans Mono&quot;, Monaco, Consolas, monospace; font-size: 12px; line-height: 1.5;">RFC_2&nbsp;=&nbsp;RandomForestClassifier(&nbsp;n_estimators&nbsp;=&nbsp;1000,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;min_samples_split&nbsp;=&nbsp;20,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;min_samples_leaf&nbsp;=&nbsp;1,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;oob_score&nbsp;=&nbsp;True,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;random_state&nbsp;=&nbsp;1,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;n_jobs&nbsp;=&nbsp;-1&nbsp;)&nbsp;

#&nbsp;篩選部份特徵欄位餵入模型進行訓練
SelectedFeatures&nbsp;=&nbsp;['Age','Sex','LogFare','Title','Pclass','Sex_Pclass']
RFC_2.fit(&nbsp;X_Train[SelectedFeatures],&nbsp;Y_Train&nbsp;)

print(&nbsp;f'Selected&nbsp;Features&nbsp;:\n&nbsp;&nbsp;&nbsp;{SelectedFeatures}'&nbsp;)
print(&nbsp;'oob_score&nbsp;=&nbsp;{:.6f}'.format(RFC_2.oob_score_)&nbsp;)</pre><p><span style="color: rgb(33, 33, 33); font-family: Roboto, Noto, sans-serif; background-color: rgb(255, 255, 255);"></span><br></p><p><span style="font-size: 18px; color: rgb(33, 37, 41); font-family: 微軟正黑體; text-align: justify; background-color: rgb(255, 255, 255);">經觀察，只篩選部份特徵欄位所訓練出的模型準確率約 84.4%，略高於所有特徵欄位所訓練出的模型，從這我們可得到一個寶貴的經驗，就是適當的挑選出關鍵性的特徵欄位進行訓練，對於模型的準確度將會有所提升。</span></p><p><br></p><h2 class="text-cell-section-header" style="color: var(--colab-primary-text-color); font-family: var(--colab-chrome-font-family); font-weight: 400; margin-bottom: 0.5em; position: relative; margin-top: 0.5em; font-size: 23px;"><span style="font-size: 24px;"><strong><span style="font-size: 24px; color: rgb(33, 37, 41); font-family: 微軟正黑體; text-align: justify; background-color: rgb(255, 255, 255);">測試集預測</span></strong></span></h2><p style="color: var(--colab-primary-text-color); margin-bottom: 6px; margin-top: 0.5em;"><span style="font-size: 18px; color: rgb(33, 37, 41); font-family: 微軟正黑體; text-align: justify; background-color: rgb(255, 255, 255);">最後，將我們訓練完成的模型用來預測測試集資料，且上傳預測結果至 Kaggle，終於大公告成了！！</span></p><pre class="brush:python;toolbar:false" style="padding: 15px 20px; border-radius: 3px; background-color: rgb(241, 241, 241); font-family: Menlo, &quot;Bitstream Vera Sans Mono&quot;, &quot;DejaVu Sans Mono&quot;, Monaco, Consolas, monospace; font-size: 12px; line-height: 1.5;">#&nbsp;預測測試集資料
Test_pred&nbsp;=&nbsp;RFC_2.predict(&nbsp;Test[SelectedFeatures]&nbsp;)

#&nbsp;檢視預測罹難或生還的機率
#print(&nbsp;RFC_2.predict_proba(Test[SelectedFeatures])&nbsp;)

#&nbsp;提交檔案
submit['Survived']&nbsp;=&nbsp;Test_pred.astype(int)
submit.to_csv(&nbsp;'Titanic_RandomForest.csv',&nbsp;index=False&nbsp;)
print(&nbsp;f'預測結果：'&nbsp;)
submit</pre><p style="color: var(--colab-primary-text-color); margin-bottom: 6px; margin-top: 0.5em;"><br></p><h2 class="text-cell-section-header" style="color: rgb(33, 33, 33); font-family: Roboto, Noto, sans-serif; font-weight: 400; margin-bottom: 0.5em; position: relative; margin-top: 0.5em; font-size: 23px; white-space: normal; background-color: rgb(255, 255, 255);"><span style="font-size: 24px;"><strong><span style="font-size: 24px; color: rgb(33, 37, 41); font-family: 微軟正黑體; text-align: justify; background-color: rgb(255, 255, 255);">總結</span></strong></span></h2><p style="color: rgb(33, 33, 33); margin-bottom: 6px; margin-top: 0.5em; font-family: Roboto, Noto, sans-serif; white-space: normal; background-color: rgb(255, 255, 255);"><span style="font-size: 18px; color: rgb(33, 37, 41); font-family: 微軟正黑體; text-align: justify; background-color: rgb(255, 255, 255);">藉由 Kaggle 上鐵達尼號生存預測比賽，我們簡單地分享有關資料的分析及處理技巧，除希望文中的程式碼範本能幫助初心者們快速上手外，更希望能使讀者瞭解一個機器學習專案的基本構思及流程，通常一個機器學習專案，我們會耗費絕大部分的時間在資料分析與特徵工程上，模型的選用及調整參數是不太需要花時間的。因此，一個專案要能順利進行，除需具備熟練的程式語言外，該領域的專業知識及實務經驗，更是一大關鍵的因素。</span></p><p style="color: rgb(33, 33, 33); margin-bottom: 6px; margin-top: 0.5em; font-family: Roboto, Noto, sans-serif; white-space: normal; background-color: rgb(255, 255, 255);"><span style="font-size: 18px; color: rgb(33, 37, 41); font-family: 微軟正黑體; text-align: justify; background-color: rgb(255, 255, 255);">最後，對於鐵達尼號生存預測比賽有興趣的初心者們，不妨再試著做更多不同的觀察及嘗試，相信你將會獲得多元的收穫與經驗！針對本文的內容，若讀者們有發現任何的錯誤或疑問，非常歡迎您來信給予建議及討論，讓我們一同來學習成長！</span></p><p style="color: var(--colab-primary-text-color); margin-bottom: 6px; margin-top: 0.5em; text-align: center;"><strong><span style="color: rgb(33, 37, 41); font-family: 微軟正黑體; font-size: 18px; text-align: justify; background-color: rgb(255, 255, 255);"><br></span></strong></p><p style="color: var(--colab-primary-text-color); margin-bottom: 6px; margin-top: 0.5em;"><strong><span style="color: rgb(33, 37, 41); font-family: 微軟正黑體; font-size: 18px; text-align: justify; background-color: rgb(255, 255, 255);">貼心實作教學：</span></strong><a href="https://colab.research.google.com/github/AI-FREE-Team/Data-Analytics-in-Practice-Titanic/blob/master/Data%20Analytics%20in%20Practice%20-%20Titanic%20Survival%20Prediction.ipynb"><img src="https://img.shields.io/badge/%E5%AF%A6%E4%BD%9C-Colab-yellow.svg?style=popout-square" alt="實作 Colab"></a></p><p style="box-sizing: border-box; margin-top: 30px; margin-bottom: 30px; line-height: 1.5; white-space: normal;"><span style="box-sizing: border-box; color: rgb(33, 37, 41); font-family: 微軟正黑體; font-size: 18px; text-align: justify; background-color: rgb(255, 255, 255);">歡迎未來有興趣一起參與學習的朋友們，一起追蹤我們粉絲專頁、加入學習社團，並持續關注&nbsp;<span style="box-sizing: border-box; color: rgb(0, 176, 240);"><span style="box-sizing: border-box; font-weight: bolder;">AI</span></span><span style="box-sizing: border-box; font-weight: bolder;">&nbsp;<span style="box-sizing: border-box; color: rgb(127, 127, 127);">.&nbsp;<span style="box-sizing: border-box; color: rgb(146, 208, 80);">FREE</span>&nbsp;Team</span></span>&nbsp;部落格，如有進一步問題或是交流需求，歡迎透過粉專 or email 聯絡我們喔！<span style="box-sizing: border-box; font-family: &quot;Microsoft JhengHei&quot;, &quot;Microsoft YaHei&quot;;">(</span><span style="box-sizing: border-box; font-weight: bolder; font-family: &quot;Microsoft JhengHei&quot;, &quot;Microsoft YaHei&quot;;"><span style="box-sizing: border-box; color: rgb(127, 127, 127);"><em style="box-sizing: border-box;">AI.Free.Team@gmail.com</em></span></span><span style="box-sizing: border-box; font-family: &quot;Microsoft JhengHei&quot;, &quot;Microsoft YaHei&quot;;">)</span></span></p><p style="box-sizing: border-box; margin-top: 30px; margin-bottom: 30px; line-height: 1.5; white-space: normal;"><span style="box-sizing: border-box; color: rgb(33, 37, 41); font-family: 微軟正黑體; font-size: 18px; text-align: justify; background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box; font-family: &quot;Microsoft JhengHei&quot;, &quot;Microsoft YaHei&quot;;">相關資訊：</span></span></p><p style="box-sizing: border-box; margin-top: 30px; margin-bottom: 30px; line-height: 1.5; white-space: normal;"><span style="box-sizing: border-box; color: rgb(33, 37, 41); font-family: 微軟正黑體; font-size: 18px; text-align: justify; background-color: rgb(255, 255, 255);">認識自由團隊：</span><a href="https://l.facebook.com/l.php?u=https%3A%2F%2Fgoo.gl%2FD2in5A%3Ffbclid%3DIwAR0wCBENlR8JdHJNqP-aPIyq4-7pyUVdnxobCH3XiapuQhQmMJSfM7XdX9Y&amp;h=AT1x7_aonCYGclyAOKkLLxqXpDGFKYxiTVqIwwcLhuz1n8mRD4ejrsbTxQ13miIdI2ojUIq_FzOu5dEkRLL-cwOBO1w_zKubEb4q2e7fiVEP2JY-yc6RI59xawVFrfTb9TWQWE5lnYApwbbMs2EnYWz08MBv2PRYTJXK0zj5WLugxg2eQjmow5UitWe45pQ5mMwkrf7O8NzpDmmzMHDXnGLTDu1_5wPJmjpf5mMoi3Jd16BSdNA-B_3BQlMzoDOOPyB1RWuQkRiC--kVa86AQW6L-_3cf5p916W3u00fVpzZslGekw0QUDyE3CvsK-Q8g7Ie-Hr9vvb1FvnTQZgROlEsJw6La-d5KcNgmxt_B6rifDFrbadqqRL08RNVqSO1fmMmh_iGloSxuu-pzEp0NAER94k9cVI07ke8dDFAaYc5C_MjM-PUHkogb_GtmvbFPMBLlcNjmLrLR6arG6AB7PdJM1wfvdqQrc1-q7Oy1Wo7RMvs7wltE4Pqfnqv1eCgensa58PE7U5-p2KS62OfG5N2PSDrIDwRLTDI0ljWDUjuFnWjj2JCeT_z72HLW44YekdkWaSntAP9Dvo7B9HnBYQTD2-JtGGNQaLY_3Xh6SNCqhYDQV8Q2iU47LTeOe0rXkYRhs-_" target="_blank" data-ft="{&quot;tn&quot;:&quot;-U&quot;}" rel="noopener nofollow" data-lynx-mode="async" style="box-sizing: border-box; color: rgb(33, 37, 41); background-color: rgb(255, 255, 255); transition: all 0.2s ease 0s; cursor: pointer; font-family: 微軟正黑體; font-size: 18px; text-align: justify;">https://goo.gl/D2in5A</a><br style="box-sizing: border-box; color: rgb(29, 33, 41); font-family: Helvetica, Arial, sans-serif; font-size: 14px; background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box; color: rgb(33, 37, 41); font-family: 微軟正黑體; font-size: 18px; text-align: justify; background-color: rgb(255, 255, 255);">加入學習社群：</span><a href="https://goo.gl/k98CBy?fbclid=IwAR2dK04dm_5OJu0oM8MZbklopzoQwVzB4O8i_Wu7AHsLNUxm2QidQHTFBh0" target="_blank" data-ft="{&quot;tn&quot;:&quot;-U&quot;}" rel="noopener nofollow" data-lynx-mode="async" data-lynx-uri="https://l.facebook.com/l.php?u=https%3A%2F%2Fgoo.gl%2Fk98CBy%3Ffbclid%3DIwAR2dK04dm_5OJu0oM8MZbklopzoQwVzB4O8i_Wu7AHsLNUxm2QidQHTFBh0&amp;h=AT2hUJ99EHHiSGJCuct3_mh3DI3zCsBOltPXmSIgbdCut_20G7b688plDB7mDoBWJPr8vbtmjCdPaTtyESKKVKp-Y8WINd-rUITRKedDrW77nBIqEZIfKgXojK7ZJEEVghfxaTT3gI2j4S9kRKSHK2Nevw_IlWsTf_OptqsC2XOCQWEuFIbIhkFeJVq9wfGt8TxnTW9DuLiKse1_zJM3-GS7avJqch2UCYQDUHqlcjOGhgN1YYiioy2vA9x1ixrdpKFHFpA9TIyIP523K-PjrsdMibHSoCtASTfD0HLjioShNJanf88YbS5ymed0ODzmCf_meT7IxgOXgLmjosmzTA7koBtfopsaYfmCHqxGWelf1BOy8-bIvAS58pjzVI10pFOHslZ_pDfC0Xhqe9hNUtINkaeBvcugQHeUZ-KgOXwHqgzmqSiSR6k2olwfZeYDPUq4ZpoAqcVdNIVxaXwU4gCMhNFTVg2b-DoQJbEX_DYbqcVr8c1W4M15rDJVClQijczh-2v9yiewQy_Tj6LpK74f3-4Z_sBNfEFkPlhYEsNlg-eWRIqTZhfo6NImQO1GS3WUXJHPHrbAfiKXVBWe9XTrlzyE0Gpifka5vg6Xl0NyMLAzDf37Iw1H7ag9O0DXgZ0FgsRH" style="box-sizing: border-box; color: rgb(33, 37, 41); background-color: rgb(255, 255, 255); transition: all 0.2s ease 0s; cursor: pointer; font-family: 微軟正黑體; font-size: 18px; text-align: justify;">https://goo.gl/k98CBy</a><br style="box-sizing: border-box; color: rgb(29, 33, 41); font-family: Helvetica, Arial, sans-serif; font-size: 14px; background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box; color: rgb(33, 37, 41); font-family: 微軟正黑體; font-size: 18px; text-align: justify; background-color: rgb(255, 255, 255);">企業合作專區：</span><a href="https://goo.gl/osGHhK?fbclid=IwAR0JTMcY-UkQSubgIxRD-KP0QQgnAczhSLPvXhyxHiR-lyNxLvorlc88sic" target="_blank" data-ft="{&quot;tn&quot;:&quot;-U&quot;}" rel="noopener nofollow" data-lynx-mode="async" data-lynx-uri="https://l.facebook.com/l.php?u=https%3A%2F%2Fgoo.gl%2FosGHhK%3Ffbclid%3DIwAR0JTMcY-UkQSubgIxRD-KP0QQgnAczhSLPvXhyxHiR-lyNxLvorlc88sic&amp;h=AT2g7NQlA23J4SytJtKZZtHFg6_VklszovxQr-kPgv7hdRw2GHgOQUNpcqO7x8ViY2I9QVbuAh8v9W-EiIYeibHEScnKPLrYrJXI3_w5aWJRBrd7edgYxZXFP-pUuywHwKgYUYkcT-gkoUc2Km7qyUIBaHGeTiNpyjIQqKAf4T1eKS5hLW7aoKUG6b5xrb2emJiosj0QIqfkZE1hSrBlSjDFyBHt_v7pBmjIJqj_VWXnIQfZojENotlE5AS3AZCAX6od5sNa8uBQlqopVpZVDFuOtEOl1UlLuVtDBlcvX6zJjSqlXjYIw_ZcDAAodzx5FgqzCsH0R6kIXRPwHygy7SLnlzUO138QStSVzXlUGJLWI4gJY13e5EFrz_J3BJf4-903T_G8coS0R5dgYChshiUeJfRqaC3_O9thhCl1IHx1Yz2gcbSRfm5LJnK1D_3baVPbO3RCu3jaweDl_6RLn33Rg-d5cowks7yQy6Ak5JfB44wZIZclyHIwVWrBPfZ9GdMs5TlyecMV0BoLlGdtJJwABV8MbobYR8-ABbWh7RBe--ogMrun5KxVr6wZNT19FkgcCYgDo2L66ljaa_DPX_tdhiKRYTJrQ7ZuZcFiJbODT0RiWJSOb2xgBdz3VHLevDgeQ4qCclT15Vs" style="box-sizing: border-box; color: rgb(33, 37, 41); background-color: rgb(255, 255, 255); transition: all 0.2s ease 0s; cursor: pointer; font-family: 微軟正黑體; font-size: 18px; text-align: justify;">https://goo.gl/osGHhK</a><br style="box-sizing: border-box; color: rgb(29, 33, 41); font-family: Helvetica, Arial, sans-serif; font-size: 14px; background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box; color: rgb(33, 37, 41); font-family: 微軟正黑體; font-size: 18px; text-align: justify; background-color: rgb(255, 255, 255);">自由學習平台：</span><a href="https://goo.gl/ALVKKF?fbclid=IwAR0YuniUXz0DVN__B3ErDuwzrs9PGwzQWnYGivX-l0ZTDjE7s2xNNUBlAI8" target="_blank" data-ft="{&quot;tn&quot;:&quot;-U&quot;}" rel="noopener nofollow" data-lynx-mode="async" data-lynx-uri="https://l.facebook.com/l.php?u=https%3A%2F%2Fgoo.gl%2FALVKKF%3Ffbclid%3DIwAR0YuniUXz0DVN__B3ErDuwzrs9PGwzQWnYGivX-l0ZTDjE7s2xNNUBlAI8&amp;h=AT2royAcMVBFRcwtjtqIuXPZHQGhTi4UMnJdxl3nHtU3oiO5rHt4iqAv_bBKswKb--NqmrZQ7upzMnDqkj8tdMqYh4zomejx-Qbz4ZL2hANZgoK5GT1jvvJIfUnqWm2CT5PwYQydEBxDMlgq6yZxazGL8nLmSbmjyPPRyVMasgNjXef3Tqt7DTxRc3alECMqA7s2YWoyZj1xXCYAaxxa_HY2U6e0s1Akjh3-4DSnDnkpL49PjmmvFYHA9wbligV82Rl0Vck4_wjoc-_TnSOv6feETd2wKFqG1LLpfnyT0J-aemjsBmJgD9aqP4qxoMSefjoPX9vGRzmPttNcwiE8_Ram0HnVwFdOUAGhtawxTeJRKMqgmK5OJ802sWV2fmljJfa5lummGny6Dh-q-uPyL5WPU5gFGkNhFxw2-V-UzQEfqmzNflbY5HUxLT3agQQffDZ6mzMWdPSZ12LpaaU_G6sLSs4MOk1s8SmPu86hhDmwbmw4GumJziGTQoKZcFz_WtN7xNYd4HkGykmOu7fp482CqpbOBZC1jQI_Z6zLSUPprvvvdSU1ywVgy5NXTR59bU3sYLEV87QQvPrBysqNCUcmQG8tQyCrFYY7McUeWHPxFgiUkueRzZy5tmETPWbNBZ7fv0TM" style="box-sizing: border-box; color: rgb(33, 37, 41); background-color: rgb(255, 255, 255); transition: all 0.2s ease 0s; cursor: pointer; font-family: 微軟正黑體; font-size: 18px; text-align: justify;">https://goo.gl/ALVKKF</a><br style="box-sizing: border-box; color: rgb(29, 33, 41); font-family: Helvetica, Arial, sans-serif; font-size: 14px; background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box; color: rgb(33, 37, 41); font-family: 微軟正黑體; font-size: 18px; text-align: justify; background-color: rgb(255, 255, 255);">【AI.Free Team 介紹影片】<br style="box-sizing: border-box; color: rgb(29, 33, 41); font-family: Helvetica, Arial, sans-serif; font-size: 14px;"></span><a href="https://www.youtube.com/watch?v=nEOi9qk35KA&amp;fbclid=IwAR1vndh-ZXRbsQBcGPlwPa3qRFJYdyIadK39r4SS7lXBeC6pw9uB9JMlbHg" target="_blank" data-ft="{&quot;tn&quot;:&quot;-U&quot;}" rel="noopener nofollow" data-lynx-mode="async" data-lynx-uri="https://l.facebook.com/l.php?u=https%3A%2F%2Fwww.youtube.com%2Fwatch%3Fv%3DnEOi9qk35KA%26fbclid%3DIwAR1vndh-ZXRbsQBcGPlwPa3qRFJYdyIadK39r4SS7lXBeC6pw9uB9JMlbHg&amp;h=AT1uFwgCAFlwmhRljKJ-7csYW2ymkxY03-BbbfVhB82OkFaX_G4FEocN05NIvQ0G_cF815C-XTQtupza2hcfq67TH3MW0UmpR8y1kdQQvR7jZn0-ibnKTEpS6uQ-jknYR1m_6RQGexa7IxZCUh8utCdEQb9nm-UQGjowPXq7eMbz5OouXMgeWsrlR7Thx3ellJYv3j2Qe5v8cy6oXgKWMOuSGTJ2lqrR7ZnD3fWri8u4ub3y5EVUX2Avm6zpV8P46fQ6E60I--XG18PCfZhlQnJzEMptevgLvNYJM9g37Tz2JAw_DZL-6FoiYYibsuIkqm7dfrXVVhWWP-R1WG7ax-9tZ1-vIs8tjAMy59l_UA_ut4VXHUM_noWKQclNlR4RXVunaLnySVa1nvP2T2oh8U7dx0cHXPilbjdkws4kdBEr_qoZlzLi0jRX5nc5mJdECncqGebLXHF7h4aM7CfKSMK-oe3-3OgsfDbHMQfqR92kxW8d8wIiVeIT5H3GTSxXMcgGAGLfq7laPsJ6WHUcqZPUSqOuBb4_iPe8LJBagpCUkYrdFt_ID0lfVSy5uJsyb3Ik7W5peHLtftAxuzFpjJ4ssBjoTmAiWi3Fv5ewsu7bxyIuQSF6JVsfEoIgTvEND1X5dfih" style="box-sizing: border-box; color: rgb(33, 37, 41); background-color: rgb(255, 255, 255); transition: all 0.2s ease 0s; cursor: pointer; font-family: 微軟正黑體; font-size: 18px; text-align: justify;">https://www.youtube.com/watch?v=nEOi9qk35KA</a></p>

            <p class="post-meta"><font face="微軟正黑體">由
              <a href="#">Tom</a>
              發布於 2019年12月16日 10:09</font></p>
          </div>
          <hr>
          <!-- Pager -->
          <div class="clearfix">
            <a class="btn btn-primary float-right" href="/postlist">回文章列表 →</a>
          </div>
        </div>
      </div>
    </div>
    <hr>

    
    
    


        <!-- Footer -->
    <div align="center">
      <div id="BA_AD_1"></div><script type="text/javascript" src="//js1.bloggerads.net/ShowBanner.aspx?blogid=20180821000002" async=""></script>
    </div>
    <footer>
      <div class="container">
        <div class="row">
          <div class="col-lg-8 col-md-10 mx-auto">
            <ul class="list-inline text-center">
              <li class="list-inline-item">
                <a href="/">
                  <span class="fa-stack fa-lg">
                    <i class="fa fa-circle fa-stack-2x"></i>
                    <i class="fa fa-home fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li class="list-inline-item">
                <a href="/blog">
                  <span class="fa-stack fa-lg">
                    <i class="fa fa-circle fa-stack-2x"></i>
                    <i class="fa fa-newspaper-o fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li class="list-inline-item">
                <a href="https://www.facebook.com/AI.Free.Team/">
                  <span class="fa-stack fa-lg">
                    <i class="fa fa-circle fa-stack-2x"></i>
                    <i class="fa fa-facebook fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li class="list-inline-item">
                <a href="mailto:AI.Free.Team@gmail.com">
                  <span class="fa-stack fa-lg">
                    <i class="fa fa-circle fa-stack-2x"></i>
                    <i class="fa fa-envelope fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
            </ul>
            <p class="copyright text-muted">Copyright © AI . Free Team 2018</p>
          </div>
        </div>
      </div>
    </footer>


    <!-- Bootstrap core JavaScript -->
    <script src="/static/bootstrap_blog/vendor/jquery/jquery.min.js"></script>
    <script src="/static/bootstrap_blog/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
    <!-- Custom scripts for this template -->
    <script src="/static/bootstrap_blog/js/clean-blog.min.js"></script>

  


</body></html>